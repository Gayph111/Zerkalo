<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ó–µ—Ä–∫–∞–ª–æ - —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Supabase JS -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
/* ===== –¢–í–û–ò –û–†–ò–ì–ò–ù–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò (—Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é) ===== */
* {
margin: 0;
padding: 0;
box-sizing: border-box;
font-family: 'Segoe UI', system-ui, sans-serif;
}
:root {
--primary: #6366f1;
--primary-dark: #4f46e5;
--secondary: #f8fafc;
--text: #1e293b;
--text-light: #64748b;
--border: #e2e8f0;
--card-bg: #ffffff;
--shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
--shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
--radius: 12px;
--error: #ef4444;
--success: #10b981;
--warning: #f59e0b;
--online: #10b981;   /* –ó–µ–ª–µ–Ω—ã–π –¥–ª—è –æ–Ω–ª–∞–π–Ω */
--offline: #94a3b8; /* –°–µ—Ä—ã–π –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω */
}
body {
background-color: #f1f5f9;
color: var(--text);
line-height: 1.6;
}
.container {
max-width: 1200px;
margin: 0 auto;
padding: 0 20px;
}
/* –ê–Ω–∏–º–∞—Ü–∏–∏ */
@keyframes fadeIn {
from { opacity: 0; }
to { opacity: 1; }
}
@keyframes slideIn {
from { transform: translateY(-10px); opacity: 0; }
to { transform: translateY(0); opacity: 1; }
}
@keyframes slideUp {
from { transform: translateY(20px); opacity: 0; }
to { transform: translateY(0); opacity: 1; }
}
@keyframes pulse {
0% { transform: scale(1); }
50% { transform: scale(1.05); }
100% { transform: scale(1); }
}
.fade-in {
animation: fadeIn 0.3s ease;
}
.slide-in {
animation: slideIn 0.3s ease;
}
.slide-up {
animation: slideUp 0.3s ease;
}
/* –®–∞–ø–∫–∞ —Å–∞–π—Ç–∞ */
header {
background-color: var(--card-bg);
box-shadow: var(--shadow);
position: sticky;
top: 0;
z-index: 100;
}
.header-content {
display: flex;
justify-content: space-between;
align-items: center;
padding: 15px 0;
}
.logo {
display: flex;
align-items: center;
gap: 10px;
font-size: 1.8rem;
font-weight: 700;
color: var(--primary);
cursor: pointer;
transition: transform 0.2s;
}
.logo:hover {
transform: scale(1.05);
}
.logo i {
font-size: 2rem;
}
.nav-links {
display: flex;
gap: 25px;
}
.nav-links a {
text-decoration: none;
color: var(--text);
font-weight: 500;
transition: all 0.2s;
padding: 8px 12px;
border-radius: 8px;
}
.nav-links a:hover {
color: var(--primary);
background-color: var(--secondary);
}
.nav-links a.active {
color: var(--primary);
background-color: rgba(99, 102, 241, 0.1);
}
.user-info {
display: flex;
align-items: center;
gap: 10px;
cursor: pointer;
padding: 8px 12px;
border-radius: 8px;
transition: background-color 0.2s;
position: relative; /* –î–ª—è —Å—Ç–∞—Ç—É—Å–∞ –æ–Ω–ª–∞–π–Ω */
}
.user-info:hover {
background-color: var(--secondary);
}
.emoji-avatar {
font-size: 2rem;
width: 50px;
height: 50px;
display: flex;
align-items: center;
justify-content: center;
background-color: var(--secondary);
border-radius: 50%;
transition: transform 0.2s;
position: relative; /* –î–ª—è —Å—Ç–∞—Ç—É—Å–∞ –æ–Ω–ª–∞–π–Ω */
}
/* –°—Ç–∞—Ç—É—Å –æ–Ω–ª–∞–π–Ω/–æ—Ñ—Ñ–ª–∞–π–Ω */
.status-indicator {
position: absolute;
bottom: 0;
right: 0;
width: 12px;
height: 12px;
border-radius: 50%;
border: 2px solid white;
background-color: var(--offline);
}
.status-online {
background-color: var(--online);
animation: pulseOnline 2s ease-in-out infinite;
}
@keyframes pulseOnline {
0%, 100% { opacity: 1; }
50% { opacity: 0.6; }
}
/* –ì–∞–ª–æ—á–∫–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ */
.verified-badge {
color: #fbbf24;
font-size: 0.8em;
margin-left: 4px;
}
.username {
font-weight: 600;
}
.clan {
background-color: var(--primary);
color: white;
padding: 3px 8px;
border-radius: 20px;
font-size: 0.8rem;
}
/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
.main-content {
display: grid;
grid-template-columns: 1fr 2fr 1fr;
gap: 25px;
padding: 25px 0;
min-height: 70vh;
}
/* –ü–∞–Ω–µ–ª–∏ */
.left-panel, .right-panel {
position: sticky;
top: 100px;
height: fit-content;
}
.panel-card {
background-color: var(--card-bg);
border-radius: var(--radius);
padding: 20px;
margin-bottom: 20px;
box-shadow: var(--shadow);
transition: transform 0.2s, box-shadow 0.2s;
}
.panel-card:hover {
box-shadow: var(--shadow-hover);
}
/* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å - –ª–µ–Ω—Ç–∞ */
.feed {
display: flex;
flex-direction: column;
gap: 20px;
}
.create-post {
background-color: var(--card-bg);
border-radius: var(--radius);
padding: 20px;
box-shadow: var(--shadow);
}
.post-input {
display: flex;
gap: 15px;
margin-bottom: 15px;
}
.post-emoji {
font-size: 2.5rem;
}
.post-textarea {
flex: 1;
border: 1px solid var(--border);
border-radius: var(--radius);
padding: 15px;
font-size: 1rem;
resize: none;
min-height: 100px;
transition: border-color 0.2s;
}
.post-textarea:focus {
outline: none;
border-color: var(--primary);
}
.post-actions {
display: flex;
justify-content: space-between;
align-items: center;
}
.btn {
padding: 10px 20px;
border: none;
border-radius: var(--radius);
font-weight: 600;
cursor: pointer;
transition: all 0.2s;
}
.btn:hover {
transform: translateY(-2px);
}
.btn-primary {
background-color: var(--primary);
color: white;
}
.btn-primary:hover {
background-color: var(--primary-dark);
}
.btn-secondary {
background-color: var(--secondary);
color: var(--text);
}
.btn-secondary:hover {
background-color: var(--border);
}
.action-icon {
color: var(--text-light);
cursor: pointer;
padding: 8px;
border-radius: 50%;
transition: all 0.2s;
}
.action-icon:hover {
background-color: var(--secondary);
color: var(--primary);
transform: scale(1.1);
}
.post {
background-color: var(--card-bg);
border-radius: var(--radius);
padding: 20px;
box-shadow: var(--shadow);
transition: transform 0.2s;
position: relative;
}
.post:hover {
transform: translateY(-5px);
}
.post-header {
display: flex;
align-items: center;
gap: 10px;
margin-bottom: 15px;
cursor: pointer;
}
.post-user-info {
flex: 1;
}
.post-username {
font-weight: 700;
margin-bottom: 2px;
display: flex;
align-items: center;
gap: 4px;
}
.post-time {
font-size: 0.9rem;
color: var(--text-light);
}
.post-content {
margin-bottom: 20px;
font-size: 1.1rem;
line-height: 1.5;
}
.post-stats {
display: flex;
gap: 20px;
padding: 15px 0;
border-top: 1px solid var(--border);
border-bottom: 1px solid var(--border);
margin-bottom: 15px;
}
.post-stat {
display: flex;
align-items: center;
gap: 5px;
color: var(--text-light);
cursor: pointer;
transition: color 0.2s;
padding: 5px 10px;
border-radius: 8px;
}
.post-stat:hover {
color: var(--primary);
background-color: var(--secondary);
}
.post-stat.active {
color: var(--primary);
}
.post-stat.liked {
color: var(--error);
}
.post-stat.liked i {
font-weight: 900;
}
.post-comments {
margin-top: 15px;
display: none;
}
.comment {
display: flex;
gap: 10px;
margin-top: 15px;
animation: fadeIn 0.3s ease;
}
.comment-content {
background-color: var(--secondary);
padding: 10px 15px;
border-radius: 20px;
flex: 1;
}
.comment-username {
font-weight: 600;
font-size: 0.9rem;
}
.comment-text {
margin-top: 5px;
}
.add-comment {
display: flex;
gap: 10px;
margin-top: 15px;
}
.comment-input {
flex: 1;
border: 1px solid var(--border);
border-radius: 20px;
padding: 10px 15px;
font-size: 0.9rem;
}
/* –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - —Ç–æ–ø –∫–ª–∞–Ω–æ–≤ */
.top-clans h3 {
margin-bottom: 15px;
display: flex;
align-items: center;
gap: 10px;
}
.clan-list {
display: flex;
flex-direction: column;
gap: 15px;
}
.clan-item {
display: flex;
align-items: center;
gap: 15px;
padding: 10px;
border-radius: var(--radius);
transition: background-color 0.2s, transform 0.2s;
cursor: pointer;
}
.clan-item:hover {
background-color: var(--secondary);
transform: translateX(5px);
}
.clan-emoji {
font-size: 2rem;
width: 50px;
height: 50px;
display: flex;
align-items: center;
justify-content: center;
background-color: var(--secondary);
border-radius: 50%;
}
.clan-info {
flex: 1;
}
.clan-name {
font-weight: 600;
font-size: 1.2rem;
}
.clan-members {
font-size: 0.9rem;
color: var(--text-light);
}
.clan-rank {
font-weight: 700;
color: var(--primary);
font-size: 1.2rem;
}
/* –í–∫–ª–∞–¥–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π */
.profiles-grid {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
gap: 20px;
margin-top: 20px;
}
.profile-card {
background-color: var(--card-bg);
border-radius: var(--radius);
padding: 20px;
text-align: center;
box-shadow: var(--shadow);
transition: transform 0.2s;
cursor: pointer;
}
.profile-card:hover {
transform: translateY(-5px);
box-shadow: var(--shadow-hover);
}
.profile-emoji {
font-size: 4rem;
margin-bottom: 15px;
}
.profile-username {
font-weight: 700;
margin-bottom: 5px;
display: flex;
justify-content: center;
align-items: center;
gap: 5px;
}
.profile-clan {
display: inline-block;
background-color: var(--primary);
color: white;
padding: 3px 10px;
border-radius: 20px;
font-size: 0.9rem;
margin-bottom: 15px;
}
.profile-stats {
display: flex;
justify-content: space-around;
margin-top: 15px;
padding-top: 15px;
border-top: 1px solid var(--border);
}
/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 992px) {
.main-content {
grid-template-columns: 1fr;
}
.left-panel, .right-panel {
position: static;
}
.header-content {
flex-direction: column;
gap: 15px;
}
.nav-links {
flex-wrap: wrap;
justify-content: center;
}
}
/* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
.modal {
display: none;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.5);
z-index: 1000;
justify-content: center;
align-items: center;
animation: fadeIn 0.3s ease;
}
.modal.active {
display: flex;
}
.modal-content {
background-color: var(--card-bg);
border-radius: var(--radius);
padding: 30px;
width: 90%;
max-width: 500px;
box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
animation: slideUp 0.3s ease;
}
.modal-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 20px;
}
.modal-title {
font-size: 1.5rem;
font-weight: 700;
}
.close-modal {
background: none;
border: none;
font-size: 1.5rem;
cursor: pointer;
color: var(--text-light);
transition: color 0.2s;
}
.close-modal:hover {
color: var(--text);
}
.form-group {
margin-bottom: 20px;
}
.form-label {
display: block;
margin-bottom: 8px;
font-weight: 600;
}
.form-input {
width: 100%;
padding: 12px;
border: 1px solid var(--border);
border-radius: var(--radius);
font-size: 1rem;
transition: border-color 0.2s;
}
.form-input:focus {
outline: none;
border-color: var(--primary);
}
.emoji-selector {
display: grid;
grid-template-columns: repeat(8, 1fr);
gap: 10px;
margin-top: 10px;
}
.emoji-option {
font-size: 1.5rem;
cursor: pointer;
text-align: center;
padding: 5px;
border-radius: 8px;
transition: background-color 0.2s, transform 0.2s;
}
.emoji-option:hover {
background-color: var(--secondary);
transform: scale(1.1);
}
.emoji-option.selected {
background-color: var(--primary);
color: white;
transform: scale(1.1);
}
/* –°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
.notification-container {
position: fixed;
top: 20px;
right: 20px;
z-index: 9999;
display: flex;
flex-direction: column;
gap: 10px;
max-width: 350px;
}
.notification {
background-color: var(--card-bg);
border-radius: var(--radius);
padding: 15px 20px;
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
display: flex;
align-items: center;
gap: 15px;
animation: slideIn 0.3s ease;
transition: transform 0.3s, opacity 0.3s;
}
.notification.hiding {
transform: translateX(100%);
opacity: 0;
}
.notification-icon {
font-size: 1.5rem;
}
.notification.success .notification-icon {
color: var(--success);
}
.notification.error .notification-icon {
color: var(--error);
}
.notification.info .notification-icon {
color: var(--primary);
}
.notification.warning .notification-icon {
color: var(--warning);
}
.notification-content {
flex: 1;
}
.notification-title {
font-weight: 600;
margin-bottom: 5px;
}
.notification-message {
font-size: 0.9rem;
color: var(--text-light);
}
.notification-close {
background: none;
border: none;
cursor: pointer;
color: var(--text-light);
font-size: 1.2rem;
}
/* –§—É—Ç–µ—Ä */
footer {
text-align: center;
padding: 30px 0;
color: var(--text-light);
border-top: 1px solid var(--border);
margin-top: 40px;
}
/* –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ */
.auth-page {
display: flex;
justify-content: center;
align-items: center;
min-height: 100vh;
background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
}
.auth-container {
width: 100%;
max-width: 500px;
background-color: var(--card-bg);
border-radius: var(--radius);
padding: 40px;
box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
animation: slideUp 0.5s ease;
}
.auth-tabs {
display: flex;
margin-bottom: 30px;
border-bottom: 1px solid var(--border);
}
.auth-tab {
flex: 1;
text-align: center;
padding: 15px;
font-weight: 600;
cursor: pointer;
transition: all 0.2s;
border-bottom: 3px solid transparent;
}
.auth-tab.active {
color: var(--primary);
border-bottom: 3px solid var(--primary);
}
.auth-form {
display: none;
}
.auth-form.active {
display: block;
animation: fadeIn 0.3s ease;
}
/* –ü—É—Å—Ç–∞—è –ª–µ–Ω—Ç–∞ */
.empty-feed {
text-align: center;
padding: 60px 20px;
color: var(--text-light);
}
.empty-feed i {
font-size: 4rem;
margin-bottom: 20px;
color: var(--border);
}
/* –°–∫—Ä—ã—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
.hidden {
display: none !important;
}

/* ===== –ù–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –£–õ–£–ß–®–ï–ù–ò–ô ===== */

/* –í–∫–ª–∞–¥–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è */
.profile-tabs {
display: flex;
border-bottom: 1px solid var(--border);
margin: 20px 0;
}
.profile-tab {
padding: 12px 20px;
cursor: pointer;
font-weight: 500;
color: var(--text-light);
border-bottom: 3px solid transparent;
transition: all 0.2s;
}
.profile-tab:hover {
color: var(--primary);
}
.profile-tab.active {
color: var(--primary);
border-bottom-color: var(--primary);
}
.profile-tab-content {
display: none;
}
.profile-tab-content.active {
display: block;
animation: fadeIn 0.3s ease;
}

/* –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
.user-description {
margin-top: 15px;
padding: 15px;
background-color: var(--secondary);
border-radius: var(--radius);
font-size: 0.95rem;
line-height: 1.6;
color: var(--text);
}

/* –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å */
.admin-panel {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
border-radius: var(--radius);
padding: 30px;
margin-bottom: 20px;
}
.admin-stats {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 20px;
margin-top: 20px;
}
.admin-stat-card {
background-color: rgba(255, 255, 255, 0.1);
border-radius: var(--radius);
padding: 20px;
text-align: center;
backdrop-filter: blur(10px);
}
.admin-stat-value {
font-size: 2.5rem;
font-weight: 700;
margin-bottom: 5px;
}
.admin-stat-label {
font-size: 0.9rem;
opacity: 0.9;
}
.admin-actions {
margin-top: 30px;
}
.admin-user-list {
background-color: rgba(255, 255, 255, 0.1);
border-radius: var(--radius);
padding: 20px;
margin-top: 20px;
max-height: 400px;
overflow-y: auto;
}
.admin-user-item {
display: flex;
align-items: center;
padding: 15px;
border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}
.admin-user-item:last-child {
border-bottom: none;
}
.admin-user-info {
flex: 1;
margin-left: 15px;
}
.admin-verify-btn {
background-color: #fbbf24;
color: white;
border: none;
padding: 8px 15px;
border-radius: 8px;
cursor: pointer;
font-weight: 600;
transition: transform 0.2s;
}
.admin-verify-btn:hover {
transform: scale(1.05);
}
.admin-verify-btn.verified {
background-color: var(--success);
}
</style>
</head>
<body>
<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
<div class="notification-container" id="notificationContainer"></div>
<!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–≤—Ö–æ–¥–∞ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω) -->
<div class="auth-page" id="authPage">
<div class="auth-container">
<div class="auth-tabs">
<div class="auth-tab active" id="loginTab">–í—Ö–æ–¥</div>
<div class="auth-tab" id="registerTab">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
</div>
<!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
<form class="auth-form active" id="loginForm">
<div class="form-group">
<label class="form-label" for="loginUsername">–Æ–∑–µ—Ä–Ω–µ–π–º</label>
<input type="text" id="loginUsername" class="form-input" placeholder="@username" required>
</div>
<div class="form-group">
<label class="form-label" for="loginPassword">–ü–∞—Ä–æ–ª—å</label>
<input type="password" id="loginPassword" class="form-input" required>
</div>
<button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">–í–æ–π—Ç–∏</button>
</form>
<!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
<form class="auth-form" id="registerForm">
<div class="form-group">
<label class="form-label" for="regUsername">–£–Ω–∏–∫–∞–ª—å–Ω—ã–π —é–∑–µ—Ä–Ω–µ–π–º</label>
<input type="text" id="regUsername" class="form-input" placeholder="@username" required>
<small style="color: var(--text-light); display: block; margin-top: 5px;">–≠—Ç–æ—Ç —é–∑–µ—Ä–Ω–µ–π–º –±—É–¥–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Ö–æ–¥–∞</small>
</div>
<div class="form-group">
<label class="form-label" for="regDisplayName">–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è</label>
<input type="text" id="regDisplayName" class="form-input" placeholder="–í–∞—à–µ –∏–º—è" required>
<small style="color: var(--text-light); display: block; margin-top: 5px;">–≠—Ç–æ –∏–º—è –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å –¥—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è</small>
</div>
<div class="form-group">
<label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —ç–º–æ–¥–∑–∏ –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∫–∏</label>
<div class="emoji-selector" id="registerEmojiSelector">
<div class="emoji-option">üòÄ</div>
<div class="emoji-option">üòé</div>
<div class="emoji-option">ü§ñ</div>
<div class="emoji-option">üëª</div>
<div class="emoji-option">üê±</div>
<div class="emoji-option">ü¶ä</div>
<div class="emoji-option">üê∂</div>
<div class="emoji-option">ü¶Å</div>
<div class="emoji-option">üöÄ</div>
<div class="emoji-option">üé®</div>
<div class="emoji-option">üéÆ</div>
<div class="emoji-option">üéµ</div>
<div class="emoji-option">üì∏</div>
<div class="emoji-option">üìö</div>
<div class="emoji-option">üç≥</div>
<div class="emoji-option">üåç</div>
</div>
<input type="hidden" id="regEmoji" value="üòÄ">
</div>
<div class="form-group">
<label class="form-label" for="regPassword">–ü–∞—Ä–æ–ª—å</label>
<input type="password" id="regPassword" class="form-input" required>
</div>
<div class="form-group">
<label class="form-label" for="regConfirmPassword">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</label>
<input type="password" id="regConfirmPassword" class="form-input" required>
</div>
<button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
</form>
</div>
</div>
<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Å–∫—Ä—ã—Ç –¥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏) -->
<div id="mainApp" class="hidden">
<!-- –®–∞–ø–∫–∞ -->
<header>
<div class="container">
<div class="header-content">
<div class="logo" id="logo">
<i class="fas fa-mirror"></i>
<span>–ó–µ—Ä–∫–∞–ª–æ</span>
</div>
<div class="nav-links">
<a href="#" class="active" data-page="feed">–õ–µ–Ω—Ç–∞</a>
<a href="#" data-page="profiles">–ü—Ä–æ—Ñ–∏–ª–∏</a>
<a href="#" data-page="clans">–ö–ª–∞–Ω—ã</a>
<a href="#" data-page="notifications">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</a>
<a href="#" data-page="admin" id="adminLink" style="display: none;">–ê–¥–º–∏–Ω–∫–∞</a>
</div>
<div class="user-info" id="userInfo">
<div class="emoji-avatar" id="userEmoji">üòÄ
<div class="status-indicator" id="userStatusIndicator"></div>
</div>
<div>
<div class="username" id="userUsername">@username <i class="fas fa-check-circle verified-badge" id="userVerifiedBadge" style="display: none;"></i></div>
<div class="clan" id="userClan">üòÄ</div>
</div>
</div>
</div>
</div>
</header>
<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
<div class="container">
<div class="main-content">
<!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
<div class="left-panel">
<div class="panel-card user-profile">
<div class="profile-emoji" id="profileEmoji">üòÄ</div>
<h2 id="profileName">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
<div class="username" id="profileUsername">@username <i class="fas fa-check-circle verified-badge" id="profileVerifiedBadge" style="display: none;"></i></div>
<div class="clan" id="profileClan" style="margin-top: 10px;">üòÄ</div>
<div class="user-description" id="userDescription">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–ø–∏—Å–∞–ª –≤ –æ–ø–∏—Å–∞–Ω–∏–∏</div>
<div class="user-stats">
<div class="stat">
<div class="stat-value" id="statPosts">0</div>
<div class="stat-label">–ü–æ—Å—Ç–æ–≤</div>
</div>
<div class="stat">
<div class="stat-value" id="statFollowers">0</div>
<div class="stat-label">–ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</div>
</div>
<div class="stat">
<div class="stat-value" id="statFollowing">0</div>
<div class="stat-label">–ü–æ–¥–ø–∏—Å–æ–∫</div>
</div>
</div>
</div>
<div class="panel-card">
<h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
<div style="margin-top: 15px; display: flex; flex-direction: column; gap: 10px;">
<button class="btn btn-secondary" id="createPostBtn">–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç</button>
<button class="btn btn-secondary" id="changeClanBtn">–°–º–µ–Ω–∏—Ç—å –∫–ª–∞–Ω</button>
<button class="btn btn-secondary" id="logoutBtn">–í—ã–π—Ç–∏</button>
</div>
</div>
</div>
<!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
<div class="feed" id="feedContent">
<!-- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ -->
<div class="create-post panel-card">
<div class="post-input">
<div class="post-emoji" id="currentUserEmoji">üòÄ</div>
<textarea class="post-textarea" id="postText" placeholder="–ß—Ç–æ —É –≤–∞—Å –Ω–æ–≤–æ–≥–æ?"></textarea>
</div>
<div class="post-actions">
<div class="action-buttons">
<div class="action-icon" title="–î–æ–±–∞–≤–∏—Ç—å —ç–º–æ–¥–∑–∏" id="addEmojiBtn">
<i class="far fa-smile"></i>
</div>
</div>
<button class="btn btn-primary" id="publishPostBtn">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
</div>
</div>
<!-- –ü–æ—Å—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
<div id="postsContainer"></div>
<!-- –ü—É—Å—Ç–∞—è –ª–µ–Ω—Ç–∞ -->
<div class="empty-feed panel-card" id="emptyFeed">
<i class="fas fa-feather-alt"></i>
<h3>–õ–µ–Ω—Ç–∞ –ø—É—Å—Ç–∞</h3>
<p>–ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –æ–ø—É–±–ª–∏–∫—É–µ—Ç —á—Ç–æ-–Ω–∏–±—É–¥—å, –∏–ª–∏ –ø–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!</p>
</div>
</div>
<!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å -->
<div class="right-panel" id="rightPanel">
<div class="panel-card top-clans">
<h3><i class="fas fa-crown"></i> –¢–æ–ø –∫–ª–∞–Ω–æ–≤</h3>
<div class="clan-list" id="topClansList">
<!-- –ö–ª–∞–Ω—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
</div>
</div>
<div class="panel-card">
<h3>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h3>
<div id="recommendationsList" style="margin-top: 15px; display: flex; flex-direction: column; gap: 15px;">
<!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
</div>
</div>
</div>
</div>
</div>
<!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π -->
<div class="container hidden" id="profilesPage">
<div class="panel-card" style="margin-top: 20px;">
<h2>–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>
<div class="profiles-grid" id="profilesGrid">
<!-- –ü—Ä–æ—Ñ–∏–ª–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
</div>
</div>
</div>
<!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–ª–∞–Ω–æ–≤ -->
<div class="container hidden" id="clansPage">
<div class="panel-card" style="margin-top: 20px;">
<h2>–í—Å–µ –∫–ª–∞–Ω—ã</h2>
<p style="margin-bottom: 20px; color: var(--text-light);">–ö–ª–∞–Ω - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —ç–º–æ–¥–∑–∏, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –≤—ã–±–∏—Ä–∞–µ—Ç–µ –∫–∞–∫ —Å–≤–æ—é –∞–≤–∞—Ç–∞—Ä–∫—É. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –∫–ª–∞–Ω—É, –≤—ã–±—Ä–∞–≤ —Ç–æ—Ç –∂–µ —ç–º–æ–¥–∑–∏, —á—Ç–æ –∏ –¥—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏!</p>
<div class="clan-list" id="allClansList" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px;">
<!-- –í—Å–µ –∫–ª–∞–Ω—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
</div>
</div>
</div>
<!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
<div class="container hidden" id="notificationsPage">
<div class="panel-card" style="margin-top: 20px;">
<h2>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
<div id="notificationsList" style="margin-top: 20px;">
<!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
</div>
</div>
</div>
<!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω–∫–∏ -->
<div class="container hidden" id="adminPanelPage">
<div class="admin-panel">
<h2 style="margin-bottom: 30px;"><i class="fas fa-shield-alt"></i> –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h2>
<div class="admin-stats">
<div class="admin-stat-card">
<div class="admin-stat-value" id="adminTotalUsers">0</div>
<div class="admin-stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
</div>
<div class="admin-stat-card">
<div class="admin-stat-value" id="adminOnlineUsers">0</div>
<div class="admin-stat-label">–û–Ω–ª–∞–π–Ω —Å–µ–π—á–∞—Å</div>
</div>
<div class="admin-stat-card">
<div class="admin-stat-value" id="adminTotalPosts">0</div>
<div class="admin-stat-label">–í—Å–µ–≥–æ –ø–æ—Å—Ç–æ–≤</div>
</div>
</div>
<div class="admin-actions">
<h3 style="margin-bottom: 15px;"><i class="fas fa-user-check"></i> –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
<div class="admin-user-list" id="adminUsersList">
<!-- –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
</div>
</div>
</div>
</div>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–º–µ–Ω—ã –∫–ª–∞–Ω–∞ -->
<div class="modal" id="clanModal">
<div class="modal-content">
<div class="modal-header">
<div class="modal-title">–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞–Ω (—ç–º–æ–¥–∑–∏)</div>
<button class="close-modal" id="closeClanModal">&times;</button>
</div>
<div class="emoji-selector" id="clanEmojiSelector">
<!-- –≠–º–æ–¥–∑–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
</div>
<button class="btn btn-primary" style="width: 100%; margin-top: 20px;" id="saveClanBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
</div>
</div>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
<div class="modal" id="viewProfileModal">
<div class="modal-content" style="max-width: 700px;">
<div class="modal-header">
<div class="modal-title">–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
<button class="close-modal" id="closeViewProfileModal">&times;</button>
</div>
<div id="viewProfileContent">
<!-- –ö–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–æ—Ñ–∏–ª—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ JS -->
</div>
</div>
</div>
<!-- –§—É—Ç–µ—Ä -->
<footer>
<div class="container">
<p>–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å "–ó–µ—Ä–∫–∞–ª–æ" &copy; 2023. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
<p style="margin-top: 10px; font-size: 0.9rem;">
<a href="#" style="color: var(--primary); text-decoration: none;">–û –Ω–∞—Å</a> |
<a href="#" style="color: var(--primary); text-decoration: none;">–ü—Ä–∞–≤–∏–ª–∞</a> |
<a href="#" style="color: var(--primary); text-decoration: none;">–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</a> |
<a href="#" style="color: var(--primary); text-decoration: none;">–ü–æ–º–æ—â—å</a>
</p>
</div>
</footer>
</div>

<script>
// ========== –ù–ê–°–¢–†–û–ô–ö–ê SUPABASE ==========
// –ó–ê–ú–ï–ù–ò –≠–¢–ò –ó–ù–ê–ß–ï–ù–ò–Ø –ù–ê –°–í–û–ò –ò–ó SUPABASE!
const supabaseUrl = 'https://kzbznupjamhualdewyxk.supabase.co'; 
const supabaseKey = 'sb_publishable_VSXNcvoaf2meTwwR8gr80g_Y_YEhSgd';
const supabase = supabase.create({ supabaseUrl, supabaseKey });

// ========== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ==========
let currentUser = null;
let allUsers = [];
let allPosts = [];
let notifications = [];
let clans = {};
let onlineUsers = new Set(); // –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å–∞

// –≠–º–æ–¥–∑–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞
const availableEmojis = ['üòÄ', 'üòé', 'ü§ñ', 'üëª', 'üê±', 'ü¶ä', 'üê∂', 'ü¶Å', 'üöÄ', 'üé®', 'üéÆ', 'üéµ', 'üì∏', 'üìö', 'üç≥', 'üåç', 'üë®‚Äçüíª', 'üë©‚Äçüíª', 'üß†', 'üí°', 'üî•', 'üåü', 'üåô', '‚òÄÔ∏è', 'üåà', 'üçï', '‚öΩ', 'üé≠', 'üé∏', 'üé¨'];

// ========== –°–ò–°–¢–ï–ú–ù–´–ï –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ==========
function showNotification(title, message, type = 'info', duration = 5000) {
const container = document.getElementById('notificationContainer');
const notification = document.createElement('div');
notification.className = `notification ${type}`;
const icon = type === 'success' ? 'check-circle' :
type === 'error' ? 'exclamation-circle' :
type === 'warning' ? 'exclamation-triangle' : 'info-circle';
notification.innerHTML = `
<div class="notification-icon">
<i class="fas fa-${icon}"></i>
</div>
<div class="notification-content">
<div class="notification-title">${title}</div>
<div class="notification-message">${message}</div>
</div>
<button class="notification-close">&times;</button>
`;
container.appendChild(notification);

// –ó–∞–∫—Ä—ã—Ç–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
const closeBtn = notification.querySelector('.notification-close');
closeBtn.addEventListener('click', () => {
notification.classList.add('hiding');
setTimeout(() => {
if (notification.parentNode) {
notification.parentNode.removeChild(notification);
}
}, 300);
});

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
if (duration > 0) {
setTimeout(() => {
if (notification.parentNode) {
notification.classList.add('hiding');
setTimeout(() => {
if (notification.parentNode) {
notification.parentNode.removeChild(notification);
}
}, 300);
}
}, duration);
}
}

// ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø SUPABASE ==========
async function initializeSupabase() {
try {
// –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ Supabase
const { data: usersData, error: usersError } = await supabase
.from('users')
.select('*')
.order('created_at', { ascending: false });

const { data: postsData, error: postsError } = await supabase
.from('posts')
.select('*')
.order('created_at', { ascending: false });

if (usersData) allUsers = usersData;
if (postsData) allPosts = postsData;

updateClanStats();
initializeUI();

// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
setInterval(updateOnlineStatus, 30000);

} catch (error) {
console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
showNotification('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ', 'error');
// –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–∞–∫ —Ä–µ–∑–µ—Ä–≤
initializeData();
}
}

// ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï –î–ê–ù–ù–´–ú–ò (–ª–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∞) ==========
function initializeData() {
// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ localStorage
const savedUsers = localStorage.getItem('mirrorUsers');
const savedPosts = localStorage.getItem('mirrorPosts');
const savedNotifications = localStorage.getItem('mirrorNotifications');

if (savedUsers) {
allUsers = JSON.parse(savedUsers);
} else {
// –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ–º–æ)
allUsers = [
{ id: 1, username: "@alex_dev", displayName: "–ê–ª–µ–∫—Å–µ–π", emoji: "üë®‚Äçüíª", password: "123", followers: [2, 3], following: [2, 3], posts: 5, clan: "üë®‚Äçüíª", is_verified: true, description: "Full-stack —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑ –ú–æ—Å–∫–≤—ã. –õ—é–±–ª—é —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫—Ä—É—Ç—ã–µ –ø—Ä–æ–µ–∫—Ç—ã!" },
{ id: 2, username: "@designer_anna", displayName: "–ê–Ω–Ω–∞", emoji: "üé®", password: "123", followers: [1, 3], following: [1], posts: 3, clan: "üé®", is_verified: false, description: "UI/UX –¥–∏–∑–∞–π–Ω–µ—Ä. –°–æ–∑–¥–∞—é –∫—Ä–∞—Å–∏–≤—ã–µ –∏ —É–¥–æ–±–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã." },
{ id: 3, username: "@gamer_max", displayName: "–ú–∞–∫—Å–∏–º", emoji: "üéÆ", password: "123", followers: [1], following: [1, 2], posts: 7, clan: "üéÆ", is_verified: false, description: "–ì–µ–π–º–µ—Ä –∏ —Å—Ç—Ä–∏–º–µ—Ä. –ò–≥—Ä–∞—é –≤ –∫–∏–±–µ—Ä—Å–ø–æ—Ä—Ç." },
{ id: 4, username: "@music_lover", displayName: "–ö–∞—Ç—è", emoji: "üéµ", password: "123", followers: [], following: [1, 2], posts: 2, clan: "üéµ", is_verified: false, description: "–ú—É–∑—ã–∫–∞–Ω—Ç –∏ –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä. –û–±–æ–∂–∞—é –∏–Ω–¥–∏-—Ä–æ–∫." },
{ id: 5, username: "@traveler", displayName: "–î–º–∏—Ç—Ä–∏–π", emoji: "üåç", password: "123", followers: [1], following: [3], posts: 4, clan: "üåç", is_verified: false, description: "–ü—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫ –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ. –ë—ã–ª –≤ 30+ —Å—Ç—Ä–∞–Ω–∞—Ö." }
];
localStorage.setItem('mirrorUsers', JSON.stringify(allUsers));
}

if (savedPosts) {
allPosts = JSON.parse(savedPosts);
} else {
// –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ—Å—Ç—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ–º–æ)
allPosts = [
{ id: 1, userId: 1, content: "–¢–æ–ª—å–∫–æ —á—Ç–æ –∑–∞–∫–æ–Ω—á–∏–ª –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç! –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª Three.js –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è 3D-–º–æ–¥–µ–ª–µ–π.", timestamp: Date.now() - 2*60*60*1000, likes: [2, 3], comments: [], reposts: 0 },
{ id: 2, userId: 2, content: "–ó–∞–ø—É—Å–∫–∞—é –Ω–æ–≤—ã–π –∫—É—Ä—Å –ø–æ UI/UX –¥–∏–∑–∞–π–Ω—É! –ü–µ—Ä–≤—ã–µ 10 —á–µ–ª–æ–≤–µ–∫ –ø–æ–ª—É—á–∞—Ç —Å–∫–∏–¥–∫—É 50%.", timestamp: Date.now() - 5*60*60*1000, likes: [1, 3], comments: [], reposts: 1 },
{ id: 3, userId: 3, content: "–ü–æ–±–∏–ª —Å–≤–æ–π —Ä–µ–∫–æ—Ä–¥ –≤ –Ω–æ–≤–æ–π –∏–≥—Ä–µ! –ö—Ç–æ –µ—â–µ –∏–≥—Ä–∞–µ—Ç?", timestamp: Date.now() - 8*60*60*1000, likes: [1, 4], comments: [{userId: 1, text: "–ö—Ä—É—Ç–æ! –í –∫–∞–∫—É—é –∏–≥—Ä—É?"}], reposts: 0 },
{ id: 4, userId: 4, content: "–û–±–Ω–∞—Ä—É–∂–∏–ª–∞ –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É —Å –ø–æ—Ç—Ä—è—Å–∞—é—â–∏–º –∑–≤—É—á–∞–Ω–∏–µ–º. –†–µ–∫–æ–º–µ–Ω–¥—É—é –≤—Å–µ–º –ª—é–±–∏—Ç–µ–ª—è–º –∏–Ω–¥–∏-—Ä–æ–∫–∞!", timestamp: Date.now() - 12*60*60*1000, likes: [2], comments: [], reposts: 0 },
{ id: 5, userId: 5, content: "–í–µ—Ä–Ω—É–ª—Å—è –∏–∑ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –ø–æ –Ø–ø–æ–Ω–∏–∏. –ù–µ–∑–∞–±—ã–≤–∞–µ–º—ã–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è –∏ –º–æ—Ä–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π!", timestamp: Date.now() - 24*60*60*1000, likes: [1, 2, 3], comments: [{userId: 2, text: "–ñ–¥—É —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏!"}], reposts: 1 }
];
localStorage.setItem('mirrorPosts', JSON.stringify(allPosts));
}

if (savedNotifications) {
notifications = JSON.parse(savedNotifications);
} else {
notifications = [];
}

// –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–ª–∞–Ω–æ–≤
updateClanStats();
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–ª–∞–Ω–æ–≤
function updateClanStats() {
clans = {};
// –°—á–∏—Ç–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∫–ª–∞–Ω–∞–º
allUsers.forEach(user => {
if (!clans[user.clan]) {
clans[user.clan] = {
emoji: user.clan,
members: 0,
posts: 0
};
}
clans[user.clan].members++;
});
// –°—á–∏—Ç–∞–µ–º –ø–æ—Å—Ç—ã –ø–æ –∫–ª–∞–Ω–∞–º
allPosts.forEach(post => {
const user = allUsers.find(u => u.id === post.userId);
if (user && clans[user.clan]) {
clans[user.clan].posts++;
}
});
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–ª–æ–∫–∞–ª—å–Ω–æ –∫–∞–∫ —Ä–µ–∑–µ—Ä–≤)
function saveData() {
localStorage.setItem('mirrorUsers', JSON.stringify(allUsers));
localStorage.setItem('mirrorPosts', JSON.stringify(allPosts));
localStorage.setItem('mirrorNotifications', JSON.stringify(notifications));
if (currentUser) {
localStorage.setItem('mirrorCurrentUser', JSON.stringify({
username: currentUser.username,
password: currentUser.password
}));
}
}

// ========== –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø –ò –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø ==========
// ... (—Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–≤–æ–π –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–≤—Ö–æ–¥–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ...

document.getElementById('loginTab').addEventListener('click', function() {
document.getElementById('loginTab').classList.add('active');
document.getElementById('registerTab').classList.remove('active');
document.getElementById('loginForm').classList.add('active');
document.getElementById('registerForm').classList.remove('active');
});

document.getElementById('registerTab').addEventListener('click', function() {
document.getElementById('registerTab').classList.add('active');
document.getElementById('loginTab').classList.remove('active');
document.getElementById('registerForm').classList.add('active');
document.getElementById('loginForm').classList.remove('active');
});

// –í—ã–±–æ—Ä —ç–º–æ–¥–∑–∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
const registerEmojiOptions = document.querySelectorAll('#registerEmojiSelector .emoji-option');
registerEmojiOptions.forEach(option => {
option.addEventListener('click', function() {
registerEmojiOptions.forEach(opt => opt.classList.remove('selected'));
this.classList.add('selected');
document.getElementById('regEmoji').value = this.textContent;
});
});
registerEmojiOptions[0].classList.add('selected');

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
document.getElementById('registerForm').addEventListener('submit', function(e) {
e.preventDefault();
const username = document.getElementById('regUsername').value.trim();
const displayName = document.getElementById('regDisplayName').value.trim();
const emoji = document.getElementById('regEmoji').value;
const password = document.getElementById('regPassword').value;
const confirmPassword = document.getElementById('regConfirmPassword').value;

// –í–∞–ª–∏–¥–∞—Ü–∏—è
if (!username.startsWith('@')) {
showNotification('–û—à–∏–±–∫–∞', '–Æ–∑–µ—Ä–Ω–µ–π–º –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å @', 'error');
return;
}
if (username.length < 3) {
showNotification('–û—à–∏–±–∫–∞', '–Æ–∑–µ—Ä–Ω–µ–π–º –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 3 —Å–∏–º–≤–æ–ª–æ–≤', 'error');
return;
}
if (password.length < 6) {
showNotification('–û—à–∏–±–∫–∞', '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤', 'error');
return;
}
if (password !== confirmPassword) {
showNotification('–û—à–∏–±–∫–∞', '–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç', 'error');
return;
}
if (allUsers.some(user => user.username === username)) {
showNotification('–û—à–∏–±–∫–∞', '–≠—Ç–æ—Ç —é–∑–µ—Ä–Ω–µ–π–º —É–∂–µ –∑–∞–Ω—è—Ç', 'error');
return;
}

// –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const newUser = {
id: allUsers.length > 0 ? Math.max(...allUsers.map(u => u.id)) + 1 : 1,
username,
displayName,
emoji,
password,
followers: [],
following: [],
posts: 0,
clan: emoji,
is_verified: false,
description: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–ø–∏—Å–∞–ª –≤ –æ–ø–∏—Å–∞–Ω–∏–∏',
created_at: new Date().toISOString()
};

allUsers.push(newUser);
currentUser = newUser;
saveData();
showNotification('–£—Å–ø–µ—Ö', '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!', 'success');

setTimeout(() => {
document.getElementById('authPage').style.display = 'none';
document.getElementById('mainApp').classList.remove('hidden');
initializeUI();
showPage('feed');
}, 1000);
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥–∞
document.getElementById('loginForm').addEventListener('submit', function(e) {
e.preventDefault();
const username = document.getElementById('loginUsername').value.trim();
const password = document.getElementById('loginPassword').value;
const user = allUsers.find(u => u.username === username && u.password === password);

if (user) {
currentUser = user;
// –û—Ç–º–µ—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–∞–∫ –æ–Ω–ª–∞–π–Ω
onlineUsers.add(user.id);
updateOnlineStatus();
saveData();
showNotification('–£—Å–ø–µ—Ö', `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${user.displayName}!`, 'success');

setTimeout(() => {
document.getElementById('authPage').style.display = 'none';
document.getElementById('mainApp').classList.remove('hidden');
initializeUI();
showPage('feed');
// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–¥–º–∏–Ω–∫—É –µ—Å–ª–∏ @onegin
if (user.username === '@onegin') {
document.getElementById('adminLink').style.display = 'block';
}
}, 1000);
} else {
showNotification('–û—à–∏–±–∫–∞', '–ù–µ–≤–µ—Ä–Ω—ã–π —é–∑–µ—Ä–Ω–µ–π–º –∏–ª–∏ –ø–∞—Ä–æ–ª—å', 'error');
}
});

// ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ù–¢–ï–†–§–ï–ô–°–ê ==========
function initializeUI() {
if (!currentUser) return;

// –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞
document.getElementById('userEmoji').textContent = currentUser.emoji;
document.getElementById('userUsername').textContent = currentUser.username;
document.getElementById('userClan').textContent = currentUser.clan;
document.getElementById('profileEmoji').textContent = currentUser.emoji;
document.getElementById('profileName').textContent = currentUser.displayName;
document.getElementById('profileUsername').textContent = currentUser.username;
document.getElementById('profileClan').textContent = currentUser.clan;
document.getElementById('currentUserEmoji').textContent = currentUser.emoji;
document.getElementById('userDescription').textContent = currentUser.description || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–ø–∏—Å–∞–ª –≤ –æ–ø–∏—Å–∞–Ω–∏–∏';

// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–∞–ª–æ—á–∫—É –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –µ—Å–ª–∏ –µ—Å—Ç—å
if (currentUser.is_verified) {
document.getElementById('userVerifiedBadge').style.display = 'inline';
document.getElementById('profileVerifiedBadge').style.display = 'inline';
} else {
document.getElementById('userVerifiedBadge').style.display = 'none';
document.getElementById('profileVerifiedBadge').style.display = 'none';
}

// –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
document.getElementById('statPosts').textContent = currentUser.posts || 0;
document.getElementById('statFollowers').textContent = currentUser.followers ? currentUser.followers.length : 0;
document.getElementById('statFollowing').textContent = currentUser.following ? currentUser.following.length : 0;

// –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
loadPosts();
loadTopClans();
loadRecommendations();
loadAllProfiles();
loadAllClans();
loadNotifications();
updateOnlineStatus();
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ–Ω–ª–∞–π–Ω
function updateOnlineStatus() {
if (!currentUser) return;

// –î–ª—è –¥–µ–º–æ: —Å—á–∏—Ç–∞–µ–º –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–∞–∫ –æ–Ω–ª–∞–π–Ω
allUsers.forEach(user => {
const isOnline = onlineUsers.has(user.id) || (Date.now() - new Date(user.created_at).getTime()) < 5 * 60 * 1000;
const statusElement = document.querySelector(`.post-header[data-user-id="${user.id}"] .status-indicator`);
if (statusElement) {
statusElement.className = 'status-indicator ' + (isOnline ? 'status-online' : '');
}
});

// –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const userStatus = document.getElementById('userStatusIndicator');
if (userStatus) {
userStatus.className = 'status-indicator ' + (onlineUsers.has(currentUser.id) ? 'status-online' : '');
}

// –û–±–Ω–æ–≤–ª—è–µ–º –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
if (document.getElementById('adminOnlineUsers')) {
document.getElementById('adminOnlineUsers').textContent = onlineUsers.size || Math.min(5, allUsers.length);
}
}

// ========== –£–õ–£–ß–®–ï–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –ü–†–û–°–ú–û–¢–†–ê –ü–†–û–§–ò–õ–Ø ==========
function showUserProfile(userId) {
const user = allUsers.find(u => u.id === userId);
if (!user) return;

const userPosts = allPosts.filter(p => p.userId === userId);
const userReposts = allPosts.filter(p => p.userId === userId && p.originalPostId);

const isFollowing = currentUser.following?.includes(userId);
const isVerified = user.is_verified || false;
const isOnline = onlineUsers.has(userId) || (Date.now() - new Date(user.created_at).getTime()) < 5 * 60 * 1000;

const modal = document.getElementById('viewProfileModal');
const content = document.getElementById('viewProfileContent');

content.innerHTML = `
<div style="text-align: center; margin-bottom: 30px;">
<div style="position: relative; display: inline-block; margin-bottom: 15px;">
<div class="profile-emoji" style="font-size: 5rem;">${user.emoji}</div>
<div class="status-indicator ${isOnline ? 'status-online' : ''}" style="position: absolute; bottom: 5px; right: 5px; width: 16px; height: 16px;"></div>
${isVerified ? '<i class="fas fa-check-circle verified-badge" style="position: absolute; bottom: 0; right: -5px; font-size: 1.2rem;"></i>' : ''}
</div>
<h2 style="font-size: 1.8rem; margin-bottom: 5px;">${user.displayName}</h2>
<div class="username" style="font-size: 1.1rem; color: var(--text-light); margin-bottom: 8px;">
${user.username}
${isVerified ? '<i class="fas fa-check-circle verified-badge"></i>' : ''}
</div>
<div class="clan" style="display: inline-block; margin-bottom: 15px;">${user.clan}</div>
${user.description ? `<div class="user-description">${user.description}</div>` : ''}
<div style="color: var(--text-light); margin-top: 10px;">
<i class="fas fa-circle ${isOnline ? 'status-online' : ''}" style="color: ${isOnline ? 'var(--online)' : 'var(--offline)'}; margin-right: 5px;"></i>
${isOnline ? '–í —Å–µ—Ç–∏' : '–ù–µ –≤ —Å–µ—Ç–∏'}
</div>
</div>

<div class="profile-tabs">
<div class="profile-tab active" data-tab="posts">–ü—É–±–ª–∏–∫–∞—Ü–∏–∏ (${userPosts.length})</div>
<div class="profile-tab" data-tab="reposts">–†–µ–ø–æ—Å—Ç—ã (${userReposts.length})</div>
</div>

<div class="profile-tab-content active" id="profilePostsTab">
${userPosts.length > 0 ? userPosts.map(post => createPostHTML(post)).join('') : 
'<div style="text-align: center; padding: 40px; color: var(--text-light);">–ü–æ–∫–∞ –Ω–µ—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–π</div>'}
</div>

<div class="profile-tab-content" id="profileRepostsTab">
${userReposts.length > 0 ? userReposts.map(post => createPostHTML(post)).join('') : 
'<div style="text-align: center; padding: 40px; color: var(--text-light);">–ü–æ–∫–∞ –Ω–µ—Ç —Ä–µ–ø–æ—Å—Ç–æ–≤</div>'}
</div>
`;

modal.classList.add('active');

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–∫–ª–∞–¥–æ–∫
document.querySelectorAll('.profile-tab').forEach(tab => {
tab.addEventListener('click', function() {
document.querySelectorAll('.profile-tab').forEach(t => t.classList.remove('active'));
document.querySelectorAll('.profile-tab-content').forEach(c => c.classList.remove('active'));
this.classList.add('active');
document.getElementById(`profile${this.dataset.tab.charAt(0).toUpperCase() + this.dataset.tab.slice(1)}Tab`).classList.add('active');
});
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–∫—Ä—ã—Ç–∏—è
document.getElementById('closeViewProfileModal').onclick = () => {
modal.classList.remove('active');
};

// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø–æ—Å—Ç–æ–≤
setTimeout(() => {
document.querySelectorAll('#viewProfileContent .post').forEach(postEl => {
const postId = parseInt(postEl.dataset.postId);
const post = allPosts.find(p => p.id === postId);
if (post) addPostEventListeners(postEl, post);
});
}, 100);
}

// –°–æ–∑–¥–∞–Ω–∏–µ HTML –¥–ª—è –ø–æ—Å—Ç–∞ (—Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–≤–æ–π –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω)
function createPostHTML(post) {
const user = allUsers.find(u => u.id === post.userId);
if (!user) return '';

const isLiked = post.likes?.includes(currentUser.id);
const timeDiff = Date.now() - post.timestamp;
const hours = Math.floor(timeDiff / (1000 * 60 * 60));
const timeText = hours < 1 ? '—Ç–æ–ª—å–∫–æ —á—Ç–æ' :
hours < 24 ? `${hours} —á –Ω–∞–∑–∞–¥` :
`${Math.floor(hours / 24)} –¥ –Ω–∞–∑–∞–¥`;

return `
<div class="post panel-card slide-up" data-post-id="${post.id}">
<div class="post-header" data-user-id="${user.id}">
<div class="emoji-avatar">${user.emoji}
<div class="status-indicator ${onlineUsers.has(user.id) ? 'status-online' : ''}"></div>
</div>
<div class="post-user-info">
<div class="post-username">
${user.username}
${user.is_verified ? '<i class="fas fa-check-circle verified-badge"></i>' : ''}
</div>
<div class="post-time">${timeText}</div>
</div>
</div>
<div class="post-content">${post.content}</div>
<div class="post-stats">
<div class="post-stat ${isLiked ? 'liked' : ''}" data-action="like">
<i class="${isLiked ? 'fas' : 'far'} fa-heart"></i>
<span>${post.likes ? post.likes.length : 0}</span>
</div>
<div class="post-stat" data-action="comment">
<i class="far fa-comment"></i>
<span>${post.comments ? post.comments.length : 0}</span>
</div>
<div class="post-stat" data-action="repost">
<i class="fas fa-retweet"></i>
<span>${post.reposts || 0}</span>
</div>
</div>
</div>
`;
}

// ========== –û–°–¢–ê–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò (—Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ==========
// ... —Ç–≤–æ–π –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –ª–∞–π–∫–æ–≤, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, —Ä–µ–ø–æ—Å—Ç–æ–≤, –∫–ª–∞–Ω–æ–≤, –ø—Ä–æ—Ñ–∏–ª–µ–π ...

// –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤ (—Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–≤–æ–π –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω)
function loadPosts() {
const postsContainer = document.getElementById('postsContainer');
const emptyFeed = document.getElementById('emptyFeed');
postsContainer.innerHTML = '';

let postsToShow = [];
if (currentUser.following && currentUser.following.length > 0) {
postsToShow = allPosts.filter(post =>
currentUser.following.includes(post.userId) || post.userId === currentUser.id
);
} else {
postsToShow = [...allPosts];
}

postsToShow.sort((a, b) => b.timestamp - a.timestamp);

if (postsToShow.length === 0) {
emptyFeed.classList.remove('hidden');
return;
} else {
emptyFeed.classList.add('hidden');
}

postsToShow.forEach(post => {
const user = allUsers.find(u => u.id === post.userId);
if (!user) return;

const postElement = document.createElement('div');
postElement.className = 'post panel-card slide-up';
postElement.dataset.postId = post.id;
postElement.innerHTML = createPostHTML(post);
postsContainer.appendChild(postElement);
addPostEventListeners(postElement, post);
});
}

// ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (loadTopClans, loadRecommendations, toggleFollow –∏ —Ç.–¥.) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...

// ========== –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ ==========
function loadAdminPanel() {
if (currentUser.username !== '@onegin') {
showNotification('–û—à–∏–±–∫–∞', '–£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏', 'error');
showPage('feed');
return;
}

document.getElementById('adminTotalUsers').textContent = allUsers.length;
document.getElementById('adminOnlineUsers').textContent = onlineUsers.size || Math.min(5, allUsers.length);
document.getElementById('adminTotalPosts').textContent = allPosts.length;

const usersList = document.getElementById('adminUsersList');
usersList.innerHTML = '';

allUsers.slice(0, 10).forEach(user => {
const userItem = document.createElement('div');
userItem.className = 'admin-user-item';

userItem.innerHTML = `
<div style="font-size: 2rem;">${user.emoji}</div>
<div class="admin-user-info">
<div style="font-weight: 600; font-size: 1.1rem;">
${user.username}
${user.is_verified ? '<i class="fas fa-check-circle verified-badge" style="color: #fbbf24; margin-left: 5px;"></i>' : ''}
</div>
<div style="color: rgba(255,255,255,0.8); margin-bottom: 5px;">${user.displayName}</div>
<div style="font-size: 0.9rem; color: rgba(255,255,255,0.6);">
–ü–æ—Å—Ç–æ–≤: ${allPosts.filter(p => p.userId === user.id).length} ‚Ä¢ 
–ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤: ${user.followers?.length || 0}
</div>
</div>
<button class="admin-verify-btn ${user.is_verified ? 'verified' : ''}">
${user.is_verified ? '‚úÖ –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω' : '–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å'}
</button>
`;

userItem.querySelector('button').addEventListener('click', async () => {
const isVerified = !user.is_verified;
user.is_verified = isVerified;
saveData();
loadAdminPanel();
showNotification('–£—Å–ø–µ—Ö', `${user.displayName} ${isVerified ? '–≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω' : '–ª–∏—à–µ–Ω –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏'}`, 'success');
});

usersList.appendChild(userItem);
});
}

// ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–¢–†–ê–ù–ò–¶–ê–ú–ò ==========
function showPage(pageName) {
document.getElementById('feedContent').classList.add('hidden');
document.getElementById('profilesPage').classList.add('hidden');
document.getElementById('clansPage').classList.add('hidden');
document.getElementById('notificationsPage').classList.add('hidden');
document.getElementById('adminPanelPage').classList.add('hidden');
document.getElementById('rightPanel').classList.add('hidden');

document.querySelectorAll('.nav-links a').forEach(link => {
link.classList.remove('active');
});

switch (pageName) {
case 'feed':
document.getElementById('feedContent').classList.remove('hidden');
document.getElementById('rightPanel').classList.remove('hidden');
document.querySelector('.nav-links a[data-page="feed"]').classList.add('active');
loadPosts();
break;
case 'profiles':
document.getElementById('profilesPage').classList.remove('hidden');
document.querySelector('.nav-links a[data-page="profiles"]').classList.add('active');
loadAllProfiles();
break;
case 'clans':
document.getElementById('clansPage').classList.remove('hidden');
document.querySelector('.nav-links a[data-page="clans"]').classList.add('active');
loadAllClans();
break;
case 'notifications':
document.getElementById('notificationsPage').classList.remove('hidden');
document.querySelector('.nav-links a[data-page="notifications"]').classList.add('active');
loadNotifications();
break;
case 'admin':
if (currentUser.username === '@onegin') {
document.getElementById('adminPanelPage').classList.remove('hidden');
document.querySelector('.nav-links a[data-page="admin"]').classList.add('active');
loadAdminPanel();
} else {
showPage('feed');
}
break;
}
}

// ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π (–Ω–∞–≤–∏–≥–∞—Ü–∏—è, –≤—ã—Ö–æ–¥ –∏ —Ç.–¥.) ...

// ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ==========
window.addEventListener('DOMContentLoaded', () => {
// –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ Supabase
initializeSupabase().catch(() => {
// –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å - –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
initializeData();
// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const savedCurrentUser = localStorage.getItem('mirrorCurrentUser');
if (savedCurrentUser) {
const userData = JSON.parse(savedCurrentUser);
const user = allUsers.find(u => u.username === userData.username && u.password === userData.password);
if (user) {
currentUser = user;
onlineUsers.add(user.id);
document.getElementById('authPage').style.display = 'none';
document.getElementById('mainApp').classList.remove('hidden');
initializeUI();
showPage('feed');
if (user.username === '@onegin') {
document.getElementById('adminLink').style.display = 'block';
}
}
}
});
});

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –æ–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å–∞
let lastActivity = Date.now();
document.addEventListener('mousemove', () => {
lastActivity = Date.now();
onlineUsers.add(currentUser?.id);
});
setInterval(() => {
if (currentUser && (Date.now() - lastActivity) < 5 * 60 * 1000) {
onlineUsers.add(currentUser.id);
} else {
onlineUsers.delete(currentUser?.id);
}
updateOnlineStatus();
}, 30000);
</script>
</body>
</html>