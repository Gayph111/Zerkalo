<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–µ—Ä–∫–∞–ª–æ - —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <style>
        /* ===== –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }
        
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #f8fafc;
            --text: #1e293b;
            --text-light: #64748b;
            --border: #e2e8f0;
            --card-bg: #ffffff;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --radius: 12px;
            --error: #ef4444;
            --success: #10b981;
            --warning: #f59e0b;
            --online: #10b981;
            --offline: #94a3b8;
        }
        
        body {
            background-color: #f1f5f9;
            color: var(--text);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* ===== –ê–ù–ò–ú–ê–¶–ò–ò ===== */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { transform: translateY(-10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .fade-in { animation: fadeIn 0.3s ease; }
        .slide-in { animation: slideIn 0.3s ease; }
        .slide-up { animation: slideUp 0.3s ease; }
        
        /* ===== –®–ê–ü–ö–ê ===== */
        header {
            background-color: var(--card-bg);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .logo:hover { transform: scale(1.05); }
        .logo i { font-size: 2rem; }
        
        .nav-links {
            display: flex;
            gap: 25px;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--text);
            font-weight: 500;
            transition: all 0.2s;
            padding: 8px 12px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
        }
        
        .nav-links a:hover {
            color: var(--primary);
            background-color: var(--secondary);
        }
        
        .nav-links a.active {
            color: var(--primary);
            background-color: rgba(99, 102, 241, 0.1);
        }
        
        .badge {
            background-color: var(--error);
            color: white;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 10px;
            position: absolute;
            top: -5px;
            right: -5px;
        }
        
        /* ===== –ò–ù–§–û–†–ú–ê–¶–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø ===== */
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: background-color 0.2s;
            position: relative;
        }
        
        .user-info:hover { background-color: var(--secondary); }
        
        .emoji-avatar {
            font-size: 2rem;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--secondary);
            border-radius: 50%;
            transition: transform 0.2s;
            position: relative;
        }
        
        .emoji-avatar:hover { transform: scale(1.1); }
        
        /* –°—Ç–∞—Ç—É—Å –æ–Ω–ª–∞–π–Ω/–æ—Ñ—Ñ–ª–∞–π–Ω */
        .status-indicator {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid white;
            background-color: var(--offline);
        }
        
        .status-online {
            background-color: var(--online);
            animation: pulse 2s ease-in-out infinite;
        }
        
        .user-details {
            display: flex;
            flex-direction: column;
        }
        
        .username {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .clan {
            background-color: var(--primary);
            color: white;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: inline-block;
        }
        
        .verified-badge {
            color: #fbbf24;
            font-size: 0.8em;
        }
        
        .btn-icon {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: background-color 0.2s;
            color: var(--text-light);
        }
        
        .btn-icon:hover {
            background-color: var(--secondary);
            color: var(--primary);
        }
        
        /* ===== –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ ===== */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 25px;
            padding: 25px 0;
            min-height: 70vh;
        }
        
        .left-panel, .right-panel {
            position: sticky;
            top: 100px;
            height: fit-content;
        }
        
        .panel-card {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .panel-card:hover {
            box-shadow: var(--shadow-hover);
        }
        
        /* ===== –ü–†–û–§–ò–õ–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø ===== */
        .user-profile {
            text-align: center;
        }
        
        .profile-emoji {
            font-size: 4rem;
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
        }
        
        .profile-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .user-description {
            margin-top: 15px;
            padding: 15px;
            background-color: var(--secondary);
            border-radius: var(--radius);
            font-size: 0.95rem;
            line-height: 1.6;
            color: var(--text);
            text-align: left;
        }
        
        .user-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        .profile-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn:hover { transform: translateY(-2px); }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover { background-color: var(--primary-dark); }
        
        .btn-secondary {
            background-color: var(--secondary);
            color: var(--text);
        }
        
        .btn-secondary:hover { background-color: var(--border); }
        
        .btn-block { width: 100%; }
        
        /* ===== –õ–ï–ù–¢–ê ===== */
        .feed {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .create-post {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
        }
        
        .post-input {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .post-emoji { font-size: 2.5rem; }
        
        .post-textarea {
            flex: 1;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 15px;
            font-size: 1rem;
            resize: none;
            min-height: 100px;
            transition: border-color 0.2s;
        }
        
        .post-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .post-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
        }
        
        .action-icon {
            color: var(--text-light);
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.2s;
        }
        
        .action-icon:hover {
            background-color: var(--secondary);
            color: var(--primary);
            transform: scale(1.1);
        }
        
        /* ===== –ü–û–°–¢–´ ===== */
        .post {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            transition: transform 0.2s;
            position: relative;
        }
        
        .post:hover { transform: translateY(-5px); }
        
        .post-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            cursor: pointer;
        }
        
        .post-user-info { flex: 1; }
        
        .post-username {
            font-weight: 700;
            margin-bottom: 2px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .post-time {
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        .post-content {
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.5;
        }
        
        .post-stats {
            display: flex;
            gap: 20px;
            padding: 15px 0;
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
            margin-bottom: 15px;
        }
        
        .post-stat {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--text-light);
            cursor: pointer;
            transition: color 0.2s;
            padding: 5px 10px;
            border-radius: 8px;
        }
        
        .post-stat:hover {
            color: var(--primary);
            background-color: var(--secondary);
        }
        
        .post-stat.active { color: var(--primary); }
        .post-stat.liked { color: var(--error); }
        .post-stat.liked i { font-weight: 900; }
        
        .post-comments {
            margin-top: 15px;
            display: none;
        }
        
        .comment {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            animation: fadeIn 0.3s ease;
        }
        
        .comment-content {
            background-color: var(--secondary);
            padding: 10px 15px;
            border-radius: 20px;
            flex: 1;
        }
        
        .comment-username {
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .comment-text { margin-top: 5px; }
        
        .add-comment {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .comment-input {
            flex: 1;
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 10px 15px;
            font-size: 0.9rem;
        }
        
        /* ===== –†–ï–ü–û–°–¢–´ ===== */
        .repost-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .repost-content {
            padding: 15px;
            background-color: var(--secondary);
            border-radius: var(--radius);
            margin: 10px 0;
        }
        
        /* ===== –ö–õ–ê–ù–´ ===== */
        .clan-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .clan-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px;
            border-radius: var(--radius);
            transition: background-color 0.2s, transform 0.2s;
            cursor: pointer;
        }
        
        .clan-item:hover {
            background-color: var(--secondary);
            transform: translateX(5px);
        }
        
        .clan-emoji {
            font-size: 2rem;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--secondary);
            border-radius: 50%;
        }
        
        .clan-info { flex: 1; }
        
        .clan-name {
            font-weight: 600;
            font-size: 1.2rem;
        }
        
        .clan-members {
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        .clan-rank {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.2rem;
        }
        
        /* ===== –ü–†–û–§–ò–õ–ò –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô ===== */
        .profiles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .profile-card {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: transform 0.2s;
            cursor: pointer;
        }
        
        .profile-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }
        
        .profile-card .profile-emoji {
            font-size: 3rem;
            margin-bottom: 10px;
        }
        
        /* ===== –í–ö–õ–ê–î–ö–ò –ü–†–û–§–ò–õ–Ø ===== */
        .profile-tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin: 20px 0;
        }
        
        .profile-tab {
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-light);
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }
        
        .profile-tab:hover { color: var(--primary); }
        
        .profile-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .profile-tab-content {
            display: none;
        }
        
        .profile-tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        /* ===== –õ–ò–ß–ù–´–ï –°–û–û–ë–©–ï–ù–ò–Ø ===== */
        .messages-container {
            display: flex;
            height: 70vh;
            background-color: var(--card-bg);
            border-radius: var(--radius);
            overflow: hidden;
        }
        
        .conversations-list {
            width: 300px;
            border-right: 1px solid var(--border);
            overflow-y: auto;
        }
        
        .conversation-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            cursor: pointer;
            transition: background-color 0.2s;
            border-bottom: 1px solid var(--border);
        }
        
        .conversation-item:hover,
        .conversation-item.active {
            background-color: var(--secondary);
        }
        
        .conversation-info {
            flex: 1;
            overflow: hidden;
        }
        
        .conversation-name {
            font-weight: 600;
            margin-bottom: 3px;
        }
        
        .conversation-last-message {
            font-size: 0.9rem;
            color: var(--text-light);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .messages-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .messages-header {
            padding: 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .messages-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .message {
            display: flex;
            max-width: 70%;
        }
        
        .message.outgoing {
            margin-left: auto;
            flex-direction: row-reverse;
        }
        
        .message-content {
            padding: 10px 15px;
            border-radius: 20px;
            background-color: var(--secondary);
        }
        
        .message.outgoing .message-content {
            background-color: var(--primary);
            color: white;
        }
        
        .message-time {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 5px;
            text-align: right;
        }
        
        .message-input-area {
            padding: 20px;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 10px;
        }
        
        .message-input {
            flex: 1;
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 10px 15px;
            font-size: 1rem;
        }
        
        /* ===== –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ ===== */
        .admin-panel {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: var(--radius);
            padding: 30px;
            margin-bottom: 20px;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .admin-stat-card {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .admin-stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .admin-stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .admin-actions {
            margin-top: 30px;
        }
        
        .admin-user-list {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius);
            padding: 20px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .admin-user-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .admin-user-item:last-child { border-bottom: none; }
        
        .admin-user-info {
            flex: 1;
            margin-left: 15px;
        }
        
        .admin-verify-btn {
            background-color: #fbbf24;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s;
        }
        
        .admin-verify-btn:hover { transform: scale(1.05); }
        .admin-verify-btn.verified { background-color: var(--success); }
        
        /* ===== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ===== */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 350px;
        }
        
        .notification {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 15px 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideIn 0.3s ease;
            transition: transform 0.3s, opacity 0.3s;
        }
        
        .notification.hiding {
            transform: translateX(100%);
            opacity: 0;
        }
        
        .notification-icon { font-size: 1.5rem; }
        
        .notification.success .notification-icon { color: var(--success); }
        .notification.error .notification-icon { color: var(--error); }
        .notification.info .notification-icon { color: var(--primary); }
        .notification.warning .notification-icon { color: var(--warning); }
        
        .notification-content { flex: 1; }
        
        .notification-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .notification-message {
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        .notification-close {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-light);
            font-size: 1.2rem;
        }
        
        /* ===== –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø ===== */
        .auth-page {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
        }
        
        .auth-container {
            width: 100%;
            max-width: 500px;
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 40px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            animation: slideUp 0.5s ease;
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--border);
        }
        
        .auth-tab {
            flex: 1;
            text-align: center;
            padding: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
        }
        
        .auth-tab.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }
        
        .auth-form { display: none; }
        .auth-form.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        .form-group { margin-bottom: 20px; }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: border-color 0.2s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .form-hint {
            display: block;
            margin-top: 5px;
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .emoji-selector {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .emoji-option {
            font-size: 1.5rem;
            cursor: pointer;
            text-align: center;
            padding: 5px;
            border-radius: 8px;
            transition: background-color 0.2s, transform 0.2s;
        }
        
        .emoji-option:hover {
            background-color: var(--secondary);
            transform: scale(1.1);
        }
        
        .emoji-option.selected {
            background-color: var(--primary);
            color: white;
            transform: scale(1.1);
        }
        
        /* ===== –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }
        
        .modal.active { display: flex; }
        
        .modal-content {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            animation: slideUp 0.3s ease;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
            transition: color 0.2s;
        }
        
        .close-modal:hover { color: var(--text); }
        
        /* ===== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –ö–õ–ê–°–°–´ ===== */
        .empty-feed {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-light);
        }
        
        .empty-feed i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: var(--border);
        }
        
        .hidden { display: none !important; }
        
        /* ===== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ ===== */
        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .left-panel, .right-panel {
                position: static;
            }
            
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .messages-container {
                flex-direction: column;
                height: 80vh;
            }
            
            .conversations-list {
                width: 100%;
                height: 200px;
                border-right: none;
                border-bottom: 1px solid var(--border);
            }
        }
    </style>
</head>
<body>
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <div class="notification-container" id="notificationContainer"></div>
    
    <!-- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è -->
    <div id="authPage" class="auth-page">
        <div class="auth-container">
            <div class="logo">
                <i class="fas fa-mirror"></i>
                <span>–ó–µ—Ä–∫–∞–ª–æ</span>
            </div>
            
            <div class="auth-tabs">
                <div class="auth-tab active" id="loginTab">–í—Ö–æ–¥</div>
                <div class="auth-tab" id="registerTab">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
            </div>
            
            <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
            <form class="auth-form active" id="loginForm">
                <div class="form-group">
                    <label class="form-label">–Æ–∑–µ—Ä–Ω–µ–π–º</label>
                    <input type="text" id="loginUsername" class="form-input" placeholder="@username" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="loginPassword" class="form-input" required>
                </div>
                
                <button type="submit" class="btn btn-primary btn-block">–í–æ–π—Ç–∏</button>
            </form>
            
            <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
            <form class="auth-form" id="registerForm">
                <div class="form-group">
                    <label class="form-label">–£–Ω–∏–∫–∞–ª—å–Ω—ã–π —é–∑–µ—Ä–Ω–µ–π–º</label>
                    <input type="text" id="regUsername" class="form-input" placeholder="@username" required>
                    <small class="form-hint">–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å @, –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è</label>
                    <input type="text" id="regDisplayName" class="form-input" placeholder="–í–∞—à–µ –∏–º—è" required>
                    <small class="form-hint">–ú–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è —É —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</label>
                    <textarea id="regDescription" class="form-input" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ..." rows="3"></textarea>
                    <small class="form-hint">–ú–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∑–∂–µ</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–≠–º–æ–¥–∑–∏ –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∫–∏</label>
                    <div class="emoji-selector" id="registerEmojiSelector">
                        <!-- –≠–º–æ–¥–∑–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                    </div>
                    <input type="hidden" id="regEmoji" value="üòÄ">
                </div>
                
                <div class="form-group">
                    <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="regPassword" class="form-input" required>
                    <small class="form-hint">–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</label>
                    <input type="password" id="regConfirmPassword" class="form-input" required>
                </div>
                
                <button type="submit" class="btn btn-primary btn-block">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            </form>
        </div>
    </div>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <div id="mainApp" class="hidden">
        <!-- –®–∞–ø–∫–∞ -->
        <header>
            <div class="container">
                <div class="header-content">
                    <div class="logo" id="logo">
                        <i class="fas fa-mirror"></i>
                        <span>–ó–µ—Ä–∫–∞–ª–æ</span>
                    </div>
                    
                    <nav class="nav-links">
                        <a href="#" class="active" data-page="feed">
                            <i class="fas fa-home"></i>
                            <span>–õ–µ–Ω—Ç–∞</span>
                        </a>
                        <a href="#" data-page="profiles">
                            <i class="fas fa-users"></i>
                            <span>–ü—Ä–æ—Ñ–∏–ª–∏</span>
                        </a>
                        <a href="#" data-page="clans">
                            <i class="fas fa-crown"></i>
                            <span>–ö–ª–∞–Ω—ã</span>
                        </a>
                        <a href="#" data-page="messages" id="messagesLink">
                            <i class="fas fa-envelope"></i>
                            <span>–°–æ–æ–±—â–µ–Ω–∏—è</span>
                            <span class="badge hidden" id="messagesBadge">0</span>
                        </a>
                        <a href="#" data-page="notifications" id="notificationsLink">
                            <i class="fas fa-bell"></i>
                            <span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                            <span class="badge hidden" id="notificationBadge">0</span>
                        </a>
                        <a href="#" data-page="admin" id="adminLink" class="hidden">
                            <i class="fas fa-shield-alt"></i>
                            <span>–ê–¥–º–∏–Ω–∫–∞</span>
                        </a>
                    </nav>
                    
                    <div class="user-info" id="userInfo">
                        <div class="emoji-avatar" id="userEmoji">üòÄ
                            <div class="status-indicator" id="userStatusIndicator"></div>
                        </div>
                        <div class="user-details">
                            <div class="username" id="userUsername">@username 
                                <i class="fas fa-check-circle verified-badge" id="userVerifiedBadge" style="display: none;"></i>
                            </div>
                            <div class="clan" id="userClan">üòÄ</div>
                        </div>
                        <button class="btn-icon" id="logoutBtn" title="–í—ã–π—Ç–∏">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="container">
            <div class="main-content">
                <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
                <div class="left-panel">
                    <div class="panel-card user-profile">
                        <div class="profile-emoji" id="profileEmoji">üòÄ
                            <div class="status-indicator" id="profileStatusIndicator"></div>
                        </div>
                        <h2 class="profile-name" id="profileName">–ò–º—è</h2>
                        <div class="username" id="profileUsername">@username 
                            <i class="fas fa-check-circle verified-badge" id="profileVerifiedBadge" style="display: none;"></i>
                        </div>
                        <div class="clan" id="profileClan">üòÄ</div>
                        
                        <div class="user-description" id="userDescription">
                            –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–ø–∏—Å–∞–ª –≤ –æ–ø–∏—Å–∞–Ω–∏–∏
                        </div>
                        
                        <div class="user-stats">
                            <div class="stat">
                                <div class="stat-value" id="statPosts">0</div>
                                <div class="stat-label">–ü–æ—Å—Ç–æ–≤</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="statFollowers">0</div>
                                <div class="stat-label">–ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="statFollowing">0</div>
                                <div class="stat-label">–ü–æ–¥–ø–∏—Å–æ–∫</div>
                            </div>
                        </div>
                        
                        <div class="profile-actions">
                            <button class="btn btn-secondary btn-block" id="createPostBtn">
                                <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç
                            </button>
                            <button class="btn btn-secondary btn-block" id="editProfileBtn">
                                <i class="fas fa-edit"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                            </button>
                            <button class="btn btn-secondary btn-block" id="changeClanBtn">
                                <i class="fas fa-exchange-alt"></i> –°–º–µ–Ω–∏—Ç—å –∫–ª–∞–Ω
                            </button>
                        </div>
                    </div>
                    
                    <div class="panel-card">
                        <h3>–°—Ç–∞—Ç—É—Å —Å–µ—Ç–∏</h3>
                        <div style="margin-top: 10px; display: flex; align-items: center; gap: 10px;">
                            <div class="status-indicator status-online"></div>
                            <span>–í —Å–µ—Ç–∏</span>
                            <span style="color: var(--text-light); font-size: 0.9rem; margin-left: auto;" id="onlineCount">0 –æ–Ω–ª–∞–π–Ω</span>
                        </div>
                    </div>
                </div>
                
                <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
                <div class="feed" id="feedContent">
                    <!-- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ -->
                    <div class="create-post panel-card">
                        <div class="post-input">
                            <div class="post-emoji" id="currentUserEmoji">üòÄ</div>
                            <textarea class="post-textarea" id="postText" placeholder="–ß—Ç–æ —É –≤–∞—Å –Ω–æ–≤–æ–≥–æ?"></textarea>
                        </div>
                        <div class="post-actions">
                            <div class="action-buttons">
                                <div class="action-icon" title="–î–æ–±–∞–≤–∏—Ç—å —ç–º–æ–¥–∑–∏" id="addEmojiBtn">
                                    <i class="far fa-smile"></i>
                                </div>
                                <div class="action-icon" title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª" id="attachFileBtn">
                                    <i class="fas fa-paperclip"></i>
                                </div>
                            </div>
                            <button class="btn btn-primary" id="publishPostBtn">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
                        </div>
                    </div>
                    
                    <!-- –ü–æ—Å—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
                    <div id="postsContainer"></div>
                    
                    <!-- –ü—É—Å—Ç–∞—è –ª–µ–Ω—Ç–∞ -->
                    <div class="empty-feed panel-card" id="emptyFeed">
                        <i class="fas fa-feather-alt"></i>
                        <h3>–õ–µ–Ω—Ç–∞ –ø—É—Å—Ç–∞</h3>
                        <p>–ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –æ–ø—É–±–ª–∏–∫—É–µ—Ç —á—Ç–æ-–Ω–∏–±—É–¥—å, –∏–ª–∏ –ø–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!</p>
                    </div>
                </div>
                
                <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å -->
                <div class="right-panel" id="rightPanel">
                    <div class="panel-card top-clans">
                        <h3><i class="fas fa-crown"></i> –¢–æ–ø –∫–ª–∞–Ω–æ–≤</h3>
                        <div class="clan-list" id="topClansList">
                            <!-- –ö–ª–∞–Ω—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                        </div>
                    </div>
                    
                    <div class="panel-card">
                        <h3>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h3>
                        <div id="recommendationsList" style="margin-top: 15px; display: flex; flex-direction: column; gap: 15px;">
                            <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                        </div>
                    </div>
                    
                    <div class="panel-card">
                        <h3>–û–Ω–ª–∞–π–Ω —Å–µ–π—á–∞—Å</h3>
                        <div id="onlineUsersList" style="margin-top: 15px; display: flex; flex-direction: column; gap: 10px;">
                            <!-- –û–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π -->
        <div class="container hidden" id="profilesPage">
            <div class="panel-card" style="margin-top: 20px;">
                <h2>–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>
                <div class="profiles-grid" id="profilesGrid">
                    <!-- –ü—Ä–æ—Ñ–∏–ª–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–ª–∞–Ω–æ–≤ -->
        <div class="container hidden" id="clansPage">
            <div class="panel-card" style="margin-top: 20px;">
                <h2>–í—Å–µ –∫–ª–∞–Ω—ã</h2>
                <p style="margin-bottom: 20px; color: var(--text-light);">
                    –ö–ª–∞–Ω - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —ç–º–æ–¥–∑–∏, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –≤—ã–±–∏—Ä–∞–µ—Ç–µ –∫–∞–∫ —Å–≤–æ—é –∞–≤–∞—Ç–∞—Ä–∫—É. 
                    –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –∫–ª–∞–Ω—É, –≤—ã–±—Ä–∞–≤ —Ç–æ—Ç –∂–µ —ç–º–æ–¥–∑–∏, —á—Ç–æ –∏ –¥—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏!
                </p>
                <div class="clan-list" id="allClansList" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px;">
                    <!-- –í—Å–µ –∫–ª–∞–Ω—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–æ–±—â–µ–Ω–∏–π -->
        <div class="container hidden" id="messagesPage">
            <div class="panel-card" style="margin-top: 20px;">
                <h2><i class="fas fa-envelope"></i> –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</h2>
                <div class="messages-container">
                    <div class="conversations-list" id="conversationsList">
                        <!-- –°–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ -->
                    </div>
                    <div class="messages-area" id="messagesArea">
                        <div class="messages-header hidden" id="messagesHeader">
                            <div class="emoji-avatar" id="chatUserEmoji">üòÄ</div>
                            <div class="chat-user-info">
                                <div class="username" id="chatUserName">@username</div>
                                <div class="user-status" id="chatUserStatus"></div>
                            </div>
                        </div>
                        <div class="messages-body" id="messagesBody">
                            <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å -->
                            <div class="empty-message" style="text-align: center; padding: 40px; color: var(--text-light);">
                                <i class="fas fa-comments" style="font-size: 3rem; margin-bottom: 15px;"></i>
                                <h3>–í—ã–±–µ—Ä–∏—Ç–µ –¥–∏–∞–ª–æ–≥</h3>
                                <p>–ù–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º</p>
                            </div>
                        </div>
                        <div class="message-input-area hidden" id="messageInputArea">
                            <input type="text" class="message-input" id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                            <button class="btn btn-primary" id="sendMessageBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
        <div class="container hidden" id="notificationsPage">
            <div class="panel-card" style="margin-top: 20px;">
                <h2><i class="fas fa-bell"></i> –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
                <div id="notificationsList" style="margin-top: 20px;">
                    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω–∫–∏ -->
        <div class="container hidden" id="adminPanelPage">
            <div class="admin-panel">
                <h2 style="margin-bottom: 30px;">
                    <i class="fas fa-shield-alt"></i> –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
                </h2>
                
                <div class="admin-stats">
                    <div class="admin-stat-card">
                        <div class="admin-stat-value" id="adminTotalUsers">0</div>
                        <div class="admin-stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-value" id="adminOnlineUsers">0</div>
                        <div class="admin-stat-label">–û–Ω–ª–∞–π–Ω —Å–µ–π—á–∞—Å</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-value" id="adminTotalPosts">0</div>
                        <div class="admin-stat-label">–í—Å–µ–≥–æ –ø–æ—Å—Ç–æ–≤</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-value" id="adminTotalMessages">0</div>
                        <div class="admin-stat-label">–°–æ–æ–±—â–µ–Ω–∏–π</div>
                    </div>
                </div>
                
                <div class="admin-actions">
                    <h3 style="margin-bottom: 15px; margin-top: 30px;">
                        <i class="fas fa-user-check"></i> –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                    </h3>
                    <div class="admin-user-list" id="adminUsersList">
                        <!-- –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
        <div class="modal" id="clanModal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞–Ω (—ç–º–æ–¥–∑–∏)</div>
                    <button class="close-modal" id="closeClanModal">&times;</button>
                </div>
                <div class="emoji-selector" id="clanEmojiSelector">
                    <!-- –≠–º–æ–¥–∑–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
                <button class="btn btn-primary btn-block" id="saveClanBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
        
        <div class="modal" id="profileModal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</div>
                    <button class="close-modal" id="closeProfileModal">&times;</button>
                </div>
                <div class="form-group">
                    <label class="form-label">–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è</label>
                    <input type="text" id="editDisplayName" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</label>
                    <textarea id="editDescription" class="form-input" rows="4" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ..."></textarea>
                </div>
                <button class="btn btn-primary btn-block" id="saveProfileBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </div>
        </div>
        
        <div class="modal" id="viewProfileModal">
            <div class="modal-content" style="max-width: 700px;">
                <div class="modal-header">
                    <div class="modal-title">–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
                    <button class="close-modal" id="closeViewProfileModal">&times;</button>
                </div>
                <div id="viewProfileContent">
                    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–æ—Ñ–∏–ª—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>

        <!-- –§—É—Ç–µ—Ä -->
        <footer>
            <div class="container">
                <p>–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å "–ó–µ—Ä–∫–∞–ª–æ" &copy; 2023. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                <p style="margin-top: 10px; font-size: 0.9rem;">
                    <a href="#" style="color: var(--primary); text-decoration: none;">–û –Ω–∞—Å</a> | 
                    <a href="#" style="color: var(--primary); text-decoration: none;">–ü—Ä–∞–≤–∏–ª–∞</a> | 
                    <a href="#" style="color: var(--primary); text-decoration: none;">–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</a> | 
                    <a href="#" style="color: var(--primary); text-decoration: none;">–ü–æ–º–æ—â—å</a>
                </p>
            </div>
        </footer>
    </div>

    <script>
		// Supabase –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
		const supabaseUrl = 'https://kzbznupjamhualdewyxk.supabase.co';
		const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6YnpudXBqYW1odWFsZGV3eXhrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzgzNDY5OTQsImV4cCI6MjA1MzkyMjk5NH0.7Ll6UZ5BnQwJq9JYv2Z8X7Qw3y5X6Z8X7Qw3y5X6Z8';
		const supabase = window.supabase.create({ supabaseUrl, supabaseKey });
		// ========== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ==========
		let currentUser = null;
		let allUsers = [];
		let allPosts = [];
		let notifications = [];
		let clans = {};
		let onlineUsers = new Set();



		// –≠–º–æ–¥–∑–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞
		const availableEmojis = ['üòÄ', 'üòé', 'ü§ñ', 'üëª', 'üê±', 'ü¶ä', 'üê∂', 'ü¶Å', 'üöÄ', 'üé®', 'üéÆ', 'üéµ', 'üì∏', 'üìö', 'üç≥', 'üåç', 'üë®‚Äçüíª', 'üë©‚Äçüíª', 'üß†', 'üí°', 'üî•', 'üåü', 'üåô', '‚òÄÔ∏è', 'üåà', 'üçï', '‚öΩ', 'üé≠', 'üé∏', 'üé¨'];

		// ========== –°–ò–°–¢–ï–ú–ù–´–ï –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ==========
		function showNotification(title, message, type = 'info', duration = 5000) {
		  const container = document.getElementById('notificationContainer');
		  if (!container) return;
		  
		  const notification = document.createElement('div');
		  notification.className = `notification ${type}`;
		  
		  const icon = type === 'success' ? 'check-circle' :
					   type === 'error' ? 'exclamation-circle' :
					   type === 'warning' ? 'exclamation-triangle' : 'info-circle';
		  
		  notification.innerHTML = `
			<div class="notification-icon">
			  <i class="fas fa-${icon}"></i>
			</div>
			<div class="notification-content">
			  <div class="notification-title">${title}</div>
			  <div class="notification-message">${message}</div>
			</div>
			<button class="notification-close">&times;</button>
		  `;
		  
		  container.appendChild(notification);

		  // –ó–∞–∫—Ä—ã—Ç–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
		  const closeBtn = notification.querySelector('.notification-close');
		  if (closeBtn) {
			closeBtn.addEventListener('click', () => {
			  notification.classList.add('hiding');
			  setTimeout(() => {
				if (notification.parentNode) {
				  notification.parentNode.removeChild(notification);
				}
			  }, 300);
			});
		  }

		  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
		  if (duration > 0) {
			setTimeout(() => {
			  if (notification.parentNode) {
				notification.classList.add('hiding');
				setTimeout(() => {
				  if (notification.parentNode) {
					notification.parentNode.removeChild(notification);
				  }
				}, 300);
			  }
			}, duration);
		  }
		}

		// ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ==========
		async function initializeSupabase() {
		  try {
			// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ localStorage
			const savedUser = localStorage.getItem('mirror_user');
			if (savedUser) {
			  currentUser = JSON.parse(savedUser);
			  await loadInitialData();
			  showMainApp();
			  return;
			}
			
			// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞
			showAuthPage();
		  } catch (error) {
			console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
			showNotification('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ', 'error');
			showAuthPage();
		  }
		}

		async function loadInitialData() {
		  try {
			// –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
			const { data: usersData, error: usersError } = await supabase
			  .from('users')
			  .select('*')
			  .order('created_at', { ascending: false });
			
			if (usersError) {
			  console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', usersError);
			  throw usersError;
			}
			allUsers = usersData || [];

			// –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ—Å—Ç—ã
			const { data: postsData, error: postsError } = await supabase
			  .from('posts')
			  .select('*')
			  .order('created_at', { ascending: false });
			
			if (postsError) {
			  console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤:', postsError);
			  throw postsError;
			}
			allPosts = postsData || [];

			// –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–ª–∞–Ω–æ–≤
			updateClanStats();

			// –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
			initializeUI();
			updateOnlineStatus();
		  } catch (error) {
			console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
			showNotification('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ', 'error');
		  }
		}

		// ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï –î–ê–ù–ù–´–ú–ò ==========
		function updateClanStats() {
		  clans = {};
		  
		  // –°—á–∏—Ç–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∫–ª–∞–Ω–∞–º
		  allUsers.forEach(user => {
			if (!clans[user.clan]) {
			  clans[user.clan] = {
				emoji: user.clan,
				members: 0,
				posts: 0
			  };
			}
			clans[user.clan].members++;
		  });

		  // –°—á–∏—Ç–∞–µ–º –ø–æ—Å—Ç—ã –ø–æ –∫–ª–∞–Ω–∞–º
		  allPosts.forEach(post => {
			const user = allUsers.find(u => u.id === post.user_id);
			if (user && clans[user.clan]) {
			  clans[user.clan].posts++;
			}
		  });
		}

		function saveData() {
		  if (currentUser) {
			localStorage.setItem('mirror_user', JSON.stringify(currentUser));
		  }
		}

		// ========== –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø –ò –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø ==========

		// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
		document.addEventListener('DOMContentLoaded', function() {
		  const loginTab = document.getElementById('loginTab');
		  const registerTab = document.getElementById('registerTab');
		  const loginForm = document.getElementById('loginForm');
		  const registerForm = document.getElementById('registerForm');

		  if (loginTab && registerTab && loginForm && registerForm) {
			loginTab.addEventListener('click', function() {
			  loginTab.classList.add('active');
			  registerTab.classList.remove('active');
			  loginForm.classList.add('active');
			  registerForm.classList.remove('active');
			});

			registerTab.addEventListener('click', function() {
			  registerTab.classList.add('active');
			  loginTab.classList.remove('active');
			  registerForm.classList.add('active');
			  loginForm.classList.remove('active');
			});

			// –í—ã–±–æ—Ä —ç–º–æ–¥–∑–∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
			const registerEmojiOptions = document.querySelectorAll('#registerEmojiSelector .emoji-option');
			registerEmojiOptions.forEach(option => {
			  option.addEventListener('click', function() {
				registerEmojiOptions.forEach(opt => opt.classList.remove('selected'));
				this.classList.add('selected');
				const regEmojiInput = document.getElementById('regEmoji');
				if (regEmojiInput) {
				  regEmojiInput.value = this.textContent;
				}
			  });
			});
			
			if (registerEmojiOptions.length > 0) {
			  registerEmojiOptions[0].classList.add('selected');
			}
		  }
		});

		// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ‚Äî –ë–ï–ó EMAIL
		document.addEventListener('DOMContentLoaded', function() {
		  const registerForm = document.getElementById('registerForm');
		  
		  if (registerForm) {
			registerForm.addEventListener('submit', async function(e) {
			  e.preventDefault();
			  
			  const username = document.getElementById('regUsername')?.value.trim();
			  const displayName = document.getElementById('regDisplayName')?.value.trim();
			  const description = document.getElementById('regDescription')?.value.trim() || '';
			  const emoji = document.getElementById('regEmoji')?.value || 'üòÄ';
			  const password = document.getElementById('regPassword')?.value;
			  const confirmPassword = document.getElementById('regConfirmPassword')?.value;

			  // –í–∞–ª–∏–¥–∞—Ü–∏—è
			  if (!username || !username.startsWith('@')) {
				showNotification('–û—à–∏–±–∫–∞', '–Æ–∑–µ—Ä–Ω–µ–π–º –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å @', 'error');
				return;
			  }
			  
			  if (username.length < 4) {
				showNotification('–û—à–∏–±–∫–∞', '–Æ–∑–µ—Ä–Ω–µ–π–º –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 3 —Å–∏–º–≤–æ–ª–æ–≤ (–±–µ–∑ @)', 'error');
				return;
			  }
			  
			  if (!password || password.length < 6) {
				showNotification('–û—à–∏–±–∫–∞', '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤', 'error');
				return;
			  }
			  
			  if (password !== confirmPassword) {
				showNotification('–û—à–∏–±–∫–∞', '–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç', 'error');
				return;
			  }

			  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —é–∑–µ—Ä–Ω–µ–π–º–∞
			  const { data: existingUser, error: checkError } = await supabase
				.from('users')
				.select('id')
				.eq('username', username)
				.single();

			  if (existingUser) {
				showNotification('–û—à–∏–±–∫–∞', '–≠—Ç–æ—Ç —é–∑–µ—Ä–Ω–µ–π–º —É–∂–µ –∑–∞–Ω—è—Ç', 'error');
				return;
			  }

			  // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
			  const { data: newUser, error: insertError } = await supabase
				.from('users')
				.insert([{
				  username: username,
				  display_name: displayName,
				  emoji: emoji,
				  password_hash: password,
				  clan: emoji,
				  description: description,
				  is_verified: false,
				  followers_count: 0,
				  following_count: 0,
				  posts_count: 0
				}])
				.select()
				.single();

			  if (insertError) {
				console.error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:', insertError);
				showNotification('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', 'error');
				return;
			  }

			  currentUser = newUser;
			  saveData();
			  showNotification('–£—Å–ø–µ—Ö', '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!', 'success');

			  setTimeout(() => {
				document.getElementById('authPage').style.display = 'none';
				document.getElementById('mainApp').classList.remove('hidden');
				initializeUI();
				showPage('feed');
				
				// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–¥–º–∏–Ω–∫—É –µ—Å–ª–∏ @onegin
				if (username === '@onegin') {
				  const adminLink = document.getElementById('adminLink');
				  if (adminLink) adminLink.style.display = 'block';
				}
			  }, 1000);
			});
		  }
		});

		// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥–∞ ‚Äî –ë–ï–ó EMAIL
		document.addEventListener('DOMContentLoaded', function() {
		  const loginForm = document.getElementById('loginForm');
		  
		  if (loginForm) {
			loginForm.addEventListener('submit', async function(e) {
			  e.preventDefault();
			  
			  const username = document.getElementById('loginUsername')?.value.trim();
			  const password = document.getElementById('loginPassword')?.value;

			  if (!username || !password) {
				showNotification('–û—à–∏–±–∫–∞', '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
				return;
			  }

			  // –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —é–∑–µ—Ä–Ω–µ–π–º—É –∏ –ø–∞—Ä–æ–ª—é
			  const { data: user, error } = await supabase
				.from('users')
				.select('*')
				.eq('username', username)
				.eq('password_hash', password)
				.single();

			  if (error || !user) {
				showNotification('–û—à–∏–±–∫–∞', '–ù–µ–≤–µ—Ä–Ω—ã–π —é–∑–µ—Ä–Ω–µ–π–º –∏–ª–∏ –ø–∞—Ä–æ–ª—å', 'error');
				return;
			  }

			  currentUser = user;
			  onlineUsers.add(user.id);
			  saveData();
			  showNotification('–£—Å–ø–µ—Ö', `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${username}!`, 'success');

			  setTimeout(() => {
				document.getElementById('authPage').style.display = 'none';
				document.getElementById('mainApp').classList.remove('hidden');
				initializeUI();
				showPage('feed');
				
				// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–¥–º–∏–Ω–∫—É –µ—Å–ª–∏ @onegin
				if (username === '@onegin') {
				  const adminLink = document.getElementById('adminLink');
				  if (adminLink) adminLink.style.display = 'block';
				}
			  }, 1000);
			});
		  }
		});

		// ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ù–¢–ï–†–§–ï–ô–°–ê ==========
		function initializeUI() {
		  if (!currentUser) return;

		  // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
		  const userEmoji = document.getElementById('userEmoji');
		  const userUsername = document.getElementById('userUsername');
		  const userClan = document.getElementById('userClan');
		  const profileEmoji = document.getElementById('profileEmoji');
		  const profileName = document.getElementById('profileName');
		  const profileUsername = document.getElementById('profileUsername');
		  const profileClan = document.getElementById('profileClan');
		  const currentUserEmoji = document.getElementById('currentUserEmoji');
		  const userDescription = document.getElementById('userDescription');
		  const statPosts = document.getElementById('statPosts');
		  const statFollowers = document.getElementById('statFollowers');
		  const statFollowing = document.getElementById('statFollowing');

		  if (userEmoji) userEmoji.textContent = currentUser.emoji;
		  if (userUsername) userUsername.textContent = currentUser.username;
		  if (userClan) userClan.textContent = currentUser.clan;
		  if (profileEmoji) profileEmoji.textContent = currentUser.emoji;
		  if (profileName) profileName.textContent = currentUser.display_name;
		  if (profileUsername) profileUsername.textContent = currentUser.username;
		  if (profileClan) profileClan.textContent = currentUser.clan;
		  if (currentUserEmoji) currentUserEmoji.textContent = currentUser.emoji;
		  if (userDescription) userDescription.textContent = currentUser.description || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–ø–∏—Å–∞–ª –≤ –æ–ø–∏—Å–∞–Ω–∏–∏';
		  if (statPosts) statPosts.textContent = currentUser.posts_count || 0;
		  if (statFollowers) statFollowers.textContent = currentUser.followers_count || 0;
		  if (statFollowing) statFollowing.textContent = currentUser.following_count || 0;

		  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–∞–ª–æ—á–∫—É –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –µ—Å–ª–∏ –µ—Å—Ç—å
		  const userVerifiedBadge = document.getElementById('userVerifiedBadge');
		  const profileVerifiedBadge = document.getElementById('profileVerifiedBadge');
		  
		  if (currentUser.is_verified) {
			if (userVerifiedBadge) userVerifiedBadge.style.display = 'inline';
			if (profileVerifiedBadge) profileVerifiedBadge.style.display = 'inline';
		  } else {
			if (userVerifiedBadge) userVerifiedBadge.style.display = 'none';
			if (profileVerifiedBadge) profileVerifiedBadge.style.display = 'none';
		  }

		  // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
		  loadPosts();
		  loadTopClans();
		  loadRecommendations();
		  loadAllProfiles();
		  loadAllClans();
		  updateOnlineStatus();
		}

		// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ–Ω–ª–∞–π–Ω
		function updateOnlineStatus() {
		  if (!currentUser) return;

		  // –û—Ç–º–µ—á–∞–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–∞–∫ –æ–Ω–ª–∞–π–Ω
		  onlineUsers.add(currentUser.id);

		  // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å —É –∞–≤–∞—Ç–∞—Ä–æ–∫ –≤ –ø–æ—Å—Ç–∞—Ö
		  document.querySelectorAll('.post-header').forEach(header => {
			const userId = header.dataset.userId;
			const statusIndicator = header.querySelector('.status-indicator');
			
			if (statusIndicator && userId) {
			  const user = allUsers.find(u => u.id === userId);
			  const isOnline = user && onlineUsers.has(user.id);
			  statusIndicator.className = 'status-indicator ' + (isOnline ? 'status-online' : '');
			}
		  });

		  // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —à–∞–ø–∫–µ
		  const userStatus = document.getElementById('userStatusIndicator');
		  if (userStatus) {
			userStatus.className = 'status-indicator ' + (onlineUsers.has(currentUser.id) ? 'status-online' : '');
		  }
		}

		// ========== –ó–ê–ì–†–£–ó–ö–ê –ö–û–ù–¢–ï–ù–¢–ê ==========

		function loadPosts() {
		  const postsContainer = document.getElementById('postsContainer');
		  const emptyFeed = document.getElementById('emptyFeed');
		  
		  if (!postsContainer || !emptyFeed) {
			console.error('–≠–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ—Å—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
			return;
		  }

		  postsContainer.innerHTML = '';

		  let postsToShow = [];
		  if (currentUser && currentUser.following && currentUser.following.length > 0) {
			postsToShow = allPosts.filter(post => 
			  currentUser.following.includes(post.user_id) || post.user_id === currentUser.id
			);
		  } else {
			postsToShow = [...allPosts];
		  }

		  postsToShow.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));

		  if (postsToShow.length === 0) {
			emptyFeed.classList.remove('hidden');
			return;
		  } else {
			emptyFeed.classList.add('hidden');
		  }

		  postsToShow.forEach(post => {
			const user = allUsers.find(u => u.id === post.user_id);
			if (!user) return;

			const postElement = document.createElement('div');
			postElement.className = 'post panel-card slide-up';
			postElement.dataset.postId = post.id;
			postElement.innerHTML = createPostHTML(post, user);
			postsContainer.appendChild(postElement);
			addPostEventListeners(postElement, post);
		  });
		}

		function createPostHTML(post, user) {
		  if (!user) return '';

		  const isLiked = post.likes && post.likes.includes(currentUser?.id);
		  const timeDiff = Date.now() - new Date(post.created_at).getTime();
		  const hours = Math.floor(timeDiff / (1000 * 60 * 60));
		  const timeText = hours < 1 ? '—Ç–æ–ª—å–∫–æ —á—Ç–æ' :
			hours < 24 ? `${hours} —á –Ω–∞–∑–∞–¥` :
			`${Math.floor(hours / 24)} –¥ –Ω–∞–∑–∞–¥`;

		  return `
			<div class="post-header" data-user-id="${user.id}">
			  <div class="emoji-avatar">${user.emoji}
				<div class="status-indicator ${onlineUsers.has(user.id) ? 'status-online' : ''}"></div>
			  </div>
			  <div class="post-user-info">
				<div class="post-username">
				  ${user.username}
				  ${user.is_verified ? '<i class="fas fa-check-circle verified-badge"></i>' : ''}
				</div>
				<div class="post-time">${timeText}</div>
			  </div>
			</div>
			<div class="post-content">${post.content}</div>
			<div class="post-stats">
			  <div class="post-stat ${isLiked ? 'liked' : ''}" data-action="like">
				<i class="${isLiked ? 'fas' : 'far'} fa-heart"></i>
				<span>${post.likes ? post.likes.length : 0}</span>
			  </div>
			  <div class="post-stat" data-action="comment">
				<i class="far fa-comment"></i>
				<span>${post.comments_count || 0}</span>
			  </div>
			  <div class="post-stat" data-action="repost">
				<i class="fas fa-retweet"></i>
				<span>${post.reposts_count || 0}</span>
			  </div>
			</div>
		  `;
		}

		function addPostEventListeners(postElement, post) {
		  // –õ–∞–π–∫
		  const likeBtn = postElement.querySelector('[data-action="like"]');
		  if (likeBtn) {
			likeBtn.addEventListener('click', async () => {
			  await toggleLike(post.id);
			});
		  }

		  // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
		  const commentBtn = postElement.querySelector('[data-action="comment"]');
		  if (commentBtn) {
			commentBtn.addEventListener('click', () => {
			  const commentsSection = postElement.querySelector('.post-comments');
			  if (commentsSection) {
				commentsSection.style.display = commentsSection.style.display === 'none' ? 'block' : 'none';
			  }
			});
		  }

		  // –†–µ–ø–æ—Å—Ç
		  const repostBtn = postElement.querySelector('[data-action="repost"]');
		  if (repostBtn) {
			repostBtn.addEventListener('click', async () => {
			  await createRepost(post.id);
			});
		  }

		  // –ö–ª–∏–∫ –ø–æ –∞–≤–∞—Ç–∞—Ä–∫–µ - –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
		  const postHeader = postElement.querySelector('.post-header');
		  if (postHeader) {
			postHeader.addEventListener('click', () => {
			  const userId = postHeader.dataset.userId;
			  if (userId) showUserProfile(userId);
			});
		  }
		}

		async function toggleLike(postId) {
		  if (!currentUser) return;

		  const post = allPosts.find(p => p.id === postId);
		  if (!post) return;

		  let newLikes = [...(post.likes || [])];
		  
		  if (newLikes.includes(currentUser.id)) {
			newLikes = newLikes.filter(id => id !== currentUser.id);
		  } else {
			newLikes.push(currentUser.id);
		  }

		  // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –±–∞–∑–µ
		  const { error } = await supabase
			.from('posts')
			.update({ likes: newLikes })
			.eq('id', postId);

		  if (error) {
			console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ª–∞–π–∫–æ–≤:', error);
			showNotification('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –ª–∞–π–∫', 'error');
			return;
		  }

		  // –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
		  post.likes = newLikes;
		  loadPosts();
		}

		async function createRepost(originalPostId) {
		  if (!currentUser) return;

		  const originalPost = allPosts.find(p => p.id === originalPostId);
		  if (!originalPost) return;

		  const { data: newPost, error } = await supabase
			.from('posts')
			.insert([{
			  user_id: currentUser.id,
			  content: '',
			  original_post_id: originalPostId,
			  likes: [],
			  comments_count: 0,
			  reposts_count: 0
			}])
			.select()
			.single();

		  if (error) {
			console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ø–æ—Å—Ç–∞:', error);
			showNotification('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ—Å—Ç', 'error');
			return;
		  }

		  // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á—ë—Ç—á–∏–∫ —Ä–µ–ø–æ—Å—Ç–æ–≤ —É –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø–æ—Å—Ç–∞
		  await supabase
			.from('posts')
			.update({ reposts_count: (originalPost.reposts_count || 0) + 1 })
			.eq('id', originalPostId);

		  allPosts.unshift(newPost);
		  loadPosts();
		  showNotification('–£—Å–ø–µ—Ö', '–†–µ–ø–æ—Å—Ç —Å–æ–∑–¥–∞–Ω!', 'success');
		}

		function loadTopClans() {
		  const topClansList = document.getElementById('topClansList');
		  if (!topClansList) return;

		  topClansList.innerHTML = '';

		  // –°–æ—Ä—Ç–∏—Ä—É–µ–º –∫–ª–∞–Ω—ã –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
		  const sortedClans = Object.values(clans)
			.sort((a, b) => b.members - a.members)
			.slice(0, 5);

		  sortedClans.forEach((clan, index) => {
			const clanElement = document.createElement('div');
			clanElement.className = 'clan-item';
			clanElement.innerHTML = `
			  <div class="clan-emoji">${clan.emoji}</div>
			  <div class="clan-info">
				<div class="clan-name">${clan.emoji}</div>
				<div class="clan-members">${clan.members} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</div>
			  </div>
			  <div class="clan-rank">${index + 1}</div>
			`;
			topClansList.appendChild(clanElement);
		  });
		}

		function loadRecommendations() {
		  const recommendationsList = document.getElementById('recommendationsList');
		  if (!recommendationsList) return;

		  recommendationsList.innerHTML = '';

		  // –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω
		  const notFollowing = allUsers.filter(user => 
			user.id !== currentUser?.id && 
			!currentUser?.following?.includes(user.id)
		  ).slice(0, 5);

		  notFollowing.forEach(user => {
			const recElement = document.createElement('div');
			recElement.style.display = 'flex';
			recElement.style.alignItems = 'center';
			recElement.style.gap = '10px';
			recElement.style.padding = '10px';
			recElement.style.borderRadius = '8px';
			recElement.style.backgroundColor = 'var(--secondary)';
			recElement.style.cursor = 'pointer';
			recElement.innerHTML = `
			  <div style="font-size: 1.5rem;">${user.emoji}</div>
			  <div style="flex: 1;">
				<div style="font-weight: 600;">${user.username}</div>
				<div style="font-size: 0.9rem; color: var(--text-light);">${user.display_name}</div>
			  </div>
			  <button class="btn btn-primary" style="padding: 5px 10px; font-size: 0.8rem;" data-user-id="${user.id}">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è</button>
			`;
			
			recElement.querySelector('button').addEventListener('click', (e) => {
			  e.stopPropagation();
			  toggleFollow(user.id);
			});
			
			recommendationsList.appendChild(recElement);
		  });
		}

		function loadAllProfiles() {
		  const profilesGrid = document.getElementById('profilesGrid');
		  if (!profilesGrid) return;

		  profilesGrid.innerHTML = '';

		  allUsers.forEach(user => {
			const profileCard = document.createElement('div');
			profileCard.className = 'profile-card';
			profileCard.dataset.userId = user.id;
			profileCard.innerHTML = `
			  <div class="profile-emoji">${user.emoji}</div>
			  <div class="profile-username">
				${user.username}
				${user.is_verified ? '<i class="fas fa-check-circle verified-badge"></i>' : ''}
			  </div>
			  <div class="profile-clan">${user.clan}</div>
			  <div class="profile-stats">
				<div>
				  <div style="font-weight: 600;">${user.posts_count || 0}</div>
				  <div style="font-size: 0.9rem; color: var(--text-light);">–ü–æ—Å—Ç–æ–≤</div>
				</div>
				<div>
				  <div style="font-weight: 600;">${user.followers_count || 0}</div>
				  <div style="font-size: 0.9rem; color: var(--text-light);">–ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</div>
				</div>
			  </div>
			`;
			profileCard.addEventListener('click', () => showUserProfile(user.id));
			profilesGrid.appendChild(profileCard);
		  });
		}

		function loadAllClans() {
		  const allClansList = document.getElementById('allClansList');
		  if (!allClansList) return;

		  allClansList.innerHTML = '';

		  Object.values(clans).forEach(clan => {
			const clanCard = document.createElement('div');
			clanCard.style.padding = '15px';
			clanCard.style.backgroundColor = 'var(--card-bg)';
			clanCard.style.borderRadius = 'var(--radius)';
			clanCard.style.boxShadow = 'var(--shadow)';
			clanCard.style.cursor = 'pointer';
			clanCard.innerHTML = `
			  <div style="font-size: 2rem; margin-bottom: 10px;">${clan.emoji}</div>
			  <div style="font-weight: 600; margin-bottom: 5px;">${clan.emoji}</div>
			  <div style="color: var(--text-light);">${clan.members} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</div>
			  <div style="color: var(--text-light); margin-top: 5px;">${clan.posts} –ø–æ—Å—Ç–æ–≤</div>
			`;
			allClansList.appendChild(clanCard);
		  });
		}

		// ========== –£–õ–£–ß–®–ï–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –ü–†–û–°–ú–û–¢–†–ê –ü–†–û–§–ò–õ–Ø ==========
		function showUserProfile(userId) {
		  const user = allUsers.find(u => u.id === userId);
		  if (!user) return;

		  const userPosts = allPosts.filter(p => p.user_id === userId);
		  const userReposts = allPosts.filter(p => p.user_id === userId && p.original_post_id);

		  const isFollowing = currentUser?.following?.includes(userId);
		  const isVerified = user.is_verified || false;
		  const isOnline = onlineUsers.has(userId);

		  const modal = document.getElementById('viewProfileModal');
		  const content = document.getElementById('viewProfileContent');

		  if (!modal || !content) return;

		  content.innerHTML = `
			<div style="text-align: center; margin-bottom: 30px;">
			  <div style="position: relative; display: inline-block; margin-bottom: 15px;">
				<div class="profile-emoji" style="font-size: 5rem;">${user.emoji}</div>
				<div class="status-indicator ${isOnline ? 'status-online' : ''}" style="position: absolute; bottom: 5px; right: 5px; width: 16px; height: 16px;"></div>
				${isVerified ? '<i class="fas fa-check-circle verified-badge" style="position: absolute; bottom: 0; right: -5px; font-size: 1.2rem;"></i>' : ''}
			  </div>
			  <h2 style="font-size: 1.8rem; margin-bottom: 5px;">${user.display_name}</h2>
			  <div class="username" style="font-size: 1.1rem; color: var(--text-light); margin-bottom: 8px;">
				${user.username}
				${isVerified ? '<i class="fas fa-check-circle verified-badge"></i>' : ''}
			  </div>
			  <div class="clan" style="display: inline-block; margin-bottom: 15px;">${user.clan}</div>
			  ${user.description ? `<div class="user-description">${user.description}</div>` : ''}
			  <div style="color: var(--text-light); margin-top: 10px;">
				<i class="fas fa-circle ${isOnline ? 'status-online' : ''}" style="color: ${isOnline ? 'var(--online)' : 'var(--offline)'}; margin-right: 5px;"></i>
				${isOnline ? '–í —Å–µ—Ç–∏' : '–ù–µ –≤ —Å–µ—Ç–∏'}
			  </div>
			</div>

			<div class="profile-tabs">
			  <div class="profile-tab active" data-tab="posts">–ü—É–±–ª–∏–∫–∞—Ü–∏–∏ (${userPosts.length})</div>
			  <div class="profile-tab" data-tab="reposts">–†–µ–ø–æ—Å—Ç—ã (${userReposts.length})</div>
			</div>

			<div class="profile-tab-content active" id="profilePostsTab">
			  ${userPosts.length > 0 ? userPosts.map(post => {
				const postAuthor = allUsers.find(u => u.id === post.user_id);
				return createPostHTML(post, postAuthor);
			  }).join('') : 
			  '<div style="text-align: center; padding: 40px; color: var(--text-light);">–ü–æ–∫–∞ –Ω–µ—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–π</div>'}
			</div>

			<div class="profile-tab-content" id="profileRepostsTab">
			  ${userReposts.length > 0 ? userReposts.map(post => {
				const postAuthor = allUsers.find(u => u.id === post.user_id);
				return createPostHTML(post, postAuthor);
			  }).join('') : 
			  '<div style="text-align: center; padding: 40px; color: var(--text-light);">–ü–æ–∫–∞ –Ω–µ—Ç —Ä–µ–ø–æ—Å—Ç–æ–≤</div>'}
			</div>
		  `;

		  modal.classList.add('active');

		  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–∫–ª–∞–¥–æ–∫
		  document.querySelectorAll('.profile-tab').forEach(tab => {
			tab.addEventListener('click', function() {
			  document.querySelectorAll('.profile-tab').forEach(t => t.classList.remove('active'));
			  document.querySelectorAll('.profile-tab-content').forEach(c => c.classList.remove('active'));
			  this.classList.add('active');
			  const tabName = this.dataset.tab.charAt(0).toUpperCase() + this.dataset.tab.slice(1);
			  document.getElementById(`profile${tabName}Tab`).classList.add('active');
			});
		  });

		  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–∫—Ä—ã—Ç–∏—è
		  const closeBtn = document.getElementById('closeViewProfileModal');
		  if (closeBtn) {
			closeBtn.onclick = () => {
			  modal.classList.remove('active');
			};
		  }

		  // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø–æ—Å—Ç–æ–≤
		  setTimeout(() => {
			document.querySelectorAll('#viewProfileContent .post').forEach(postEl => {
			  const postId = postEl.dataset.postId;
			  const post = allPosts.find(p => p.id === postId);
			  if (post) addPostEventListeners(postEl, post);
			});
		  }, 100);
		}

		// ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–¢–†–ê–ù–ò–¶–ê–ú–ò ==========
		function showPage(pageName) {
		  // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
		  const pages = ['feedContent', 'profilesPage', 'clansPage', 'notificationsPage', 'adminPanelPage'];
		  pages.forEach(pageId => {
			const page = document.getElementById(pageId);
			if (page) page.classList.add('hidden');
		  });

		  // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–∞–≤—É—é –ø–∞–Ω–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
		  const rightPanel = document.getElementById('rightPanel');
		  if (rightPanel) rightPanel.classList.add('hidden');

		  // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫
		  document.querySelectorAll('.nav-links a').forEach(link => {
			link.classList.remove('active');
		  });

		  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
		  switch (pageName) {
			case 'feed':
			  document.getElementById('feedContent')?.classList.remove('hidden');
			  document.getElementById('rightPanel')?.classList.remove('hidden');
			  document.querySelector('.nav-links a[data-page="feed"]')?.classList.add('active');
			  loadPosts();
			  break;
			case 'profiles':
			  document.getElementById('profilesPage')?.classList.remove('hidden');
			  document.querySelector('.nav-links a[data-page="profiles"]')?.classList.add('active');
			  loadAllProfiles();
			  break;
			case 'clans':
			  document.getElementById('clansPage')?.classList.remove('hidden');
			  document.querySelector('.nav-links a[data-page="clans"]')?.classList.add('active');
			  loadAllClans();
			  break;
			case 'notifications':
			  document.getElementById('notificationsPage')?.classList.remove('hidden');
			  document.querySelector('.nav-links a[data-page="notifications"]')?.classList.add('active');
			  // loadNotifications();
			  break;
			case 'admin':
			  if (currentUser?.username === '@onegin') {
				document.getElementById('adminPanelPage')?.classList.remove('hidden');
				document.querySelector('.nav-links a[data-page="admin"]')?.classList.add('active');
				loadAdminPanel();
			  } else {
				showPage('feed');
			  }
			  break;
		  }
		}

		function showMainApp() {
		  const authPage = document.getElementById('authPage');
		  const mainApp = document.getElementById('mainApp');
		  
		  if (authPage) authPage.classList.add('hidden');
		  if (mainApp) mainApp.classList.remove('hidden');
		  
		  showPage('feed');
		  
		  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–¥–º–∏–Ω–∫—É –µ—Å–ª–∏ @onegin
		  if (currentUser?.username === '@onegin') {
			const adminLink = document.getElementById('adminLink');
			if (adminLink) adminLink.style.display = 'block';
		  }
		}

		function showAuthPage() {
		  const authPage = document.getElementById('authPage');
		  const mainApp = document.getElementById('mainApp');
		  
		  if (authPage) authPage.classList.remove('hidden');
		  if (mainApp) mainApp.classList.add('hidden');
		}

		// ========== –°–û–ó–î–ê–ù–ò–ï –ü–û–°–¢–ê ==========

		async function createPost(content) {
		  if (!currentUser || !content.trim()) return;

		  try {
			const { data: newPost, error } = await supabase
			  .from('posts')
			  .insert([{
				user_id: currentUser.id,
				content: content.trim(),
				likes: [],
				comments_count: 0,
				reposts_count: 0
			  }])
			  .select()
			  .single();

			if (error) {
			  console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞:', error);
			  throw error;
			}

			// –î–æ–±–∞–≤–ª—è–µ–º –ø–æ—Å—Ç –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤
			allPosts.unshift(newPost);

			// –û–±–Ω–æ–≤–ª—è–µ–º —Å—á—ë—Ç—á–∏–∫ –ø–æ—Å—Ç–æ–≤ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
			currentUser.posts_count = (currentUser.posts_count || 0) + 1;
			await supabase
			  .from('users')
			  .update({ posts_count: currentUser.posts_count })
			  .eq('id', currentUser.id);

			// –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
			saveData();

			// –û–±–Ω–æ–≤–ª—è–µ–º UI
			loadPosts();
			showNotification('–£—Å–ø–µ—Ö', '–ü–æ—Å—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω!', 'success');

			return { success: true, post: newPost };
		  } catch (error) {
			console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞:', error);
			showNotification('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç', 'error');
			return { success: false, error: error.message };
		  }
		}

		// ========== –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ ==========
		function loadAdminPanel() {
		  if (currentUser?.username !== '@onegin') {
			showNotification('–û—à–∏–±–∫–∞', '–£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏', 'error');
			showPage('feed');
			return;
		  }

		  // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
		  const adminTotalUsers = document.getElementById('adminTotalUsers');
		  const adminOnlineUsers = document.getElementById('adminOnlineUsers');
		  const adminTotalPosts = document.getElementById('adminTotalPosts');
		  
		  if (adminTotalUsers) adminTotalUsers.textContent = allUsers.length;
		  if (adminOnlineUsers) adminOnlineUsers.textContent = onlineUsers.size || Math.min(5, allUsers.length);
		  if (adminTotalPosts) adminTotalPosts.textContent = allPosts.length;

		  // –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
		  const usersList = document.getElementById('adminUsersList');
		  if (!usersList) return;

		  usersList.innerHTML = '';

		  allUsers.slice(0, 10).forEach(user => {
			const userItem = document.createElement('div');
			userItem.className = 'admin-user-item';

			userItem.innerHTML = `
			  <div style="font-size: 2rem;">${user.emoji}</div>
			  <div class="admin-user-info">
				<div style="font-weight: 600; font-size: 1.1rem;">
				  ${user.username}
				  ${user.is_verified ? '<i class="fas fa-check-circle verified-badge" style="color: #fbbf24; margin-left: 5px;"></i>' : ''}
				</div>
				<div style="color: rgba(255,255,255,0.8); margin-bottom: 5px;">${user.display_name}</div>
				<div style="font-size: 0.9rem; color: rgba(255,255,255,0.6);">
				  –ü–æ—Å—Ç–æ–≤: ${user.posts_count || 0} ‚Ä¢ 
				  –ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤: ${user.followers_count || 0}
				</div>
			  </div>
			  <button class="admin-verify-btn ${user.is_verified ? 'verified' : ''}">
				${user.is_verified ? '‚úÖ –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω' : '–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å'}
			  </button>
			`;

			userItem.querySelector('button').addEventListener('click', async () => {
			  const isVerified = !user.is_verified;
			  
			  const { error } = await supabase
				.from('users')
				.update({ is_verified: isVerified })
				.eq('id', user.id);

			  if (error) {
				console.error('–û—à–∏–±–∫–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏:', error);
				showNotification('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é', 'error');
				return;
			  }

			  user.is_verified = isVerified;
			  loadAdminPanel();
			  showNotification('–£—Å–ø–µ—Ö', `${user.display_name} ${isVerified ? '–≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω' : '–ª–∏—à–µ–Ω –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏'}`, 'success');
			});

			usersList.appendChild(userItem);
		  });
		}

		// ========== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô ==========

		document.addEventListener('DOMContentLoaded', function() {
		  // –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–∞
		  const publishPostBtn = document.getElementById('publishPostBtn');
		  const postText = document.getElementById('postText');
		  
		  if (publishPostBtn && postText) {
			publishPostBtn.addEventListener('click', async () => {
			  const content = postText.value.trim();

			  if (!content) {
				showNotification('–û—à–∏–±–∫–∞', '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞', 'error');
				return;
			  }

			  const result = await createPost(content);

			  if (result.success) {
				postText.value = '';
			  }
			});
		  }

		  // –í—ã—Ö–æ–¥
		  const logoutBtn = document.getElementById('logoutBtn');
		  if (logoutBtn) {
			logoutBtn.addEventListener('click', () => {
			  currentUser = null;
			  localStorage.removeItem('mirror_user');
			  showAuthPage();
			  showNotification('–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è', '–í—ã –≤—ã—à–ª–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞', 'info');
			});
		  }

		  // –ù–∞–≤–∏–≥–∞—Ü–∏—è
		  document.querySelectorAll('.nav-links a').forEach(link => {
			link.addEventListener('click', (e) => {
			  e.preventDefault();
			  const page = link.dataset.page;
			  if (page) showPage(page);
			});
		  });

		  // –°–º–µ–Ω–∞ –∫–ª–∞–Ω–∞
		  const changeClanBtn = document.getElementById('changeClanBtn');
		  const clanModal = document.getElementById('clanModal');
		  const closeClanModal = document.getElementById('closeClanModal');
		  const saveClanBtn = document.getElementById('saveClanBtn');

		  if (changeClanBtn && clanModal) {
			changeClanBtn.addEventListener('click', () => {
			  clanModal.classList.add('active');
			  
			  // –ó–∞–ø–æ–ª–Ω—è–µ–º —ç–º–æ–¥–∑–∏
			  const clanEmojiSelector = document.getElementById('clanEmojiSelector');
			  if (clanEmojiSelector) {
				clanEmojiSelector.innerHTML = '';
				availableEmojis.forEach(emoji => {
				  const emojiEl = document.createElement('div');
				  emojiEl.className = 'emoji-option';
				  emojiEl.textContent = emoji;
				  emojiEl.addEventListener('click', async () => {
					// –û–±–Ω–æ–≤–ª—è–µ–º –∫–ª–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
					currentUser.clan = emoji;
					
					const { error } = await supabase
					  .from('users')
					  .update({ clan: emoji })
					  .eq('id', currentUser.id);

					if (error) {
					  console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–ª–∞–Ω–∞:', error);
					  showNotification('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å —Å–º–µ–Ω–∏—Ç—å –∫–ª–∞–Ω', 'error');
					  return;
					}

					saveData();
					initializeUI();
					clanModal.classList.remove('active');
					showNotification('–£—Å–ø–µ—Ö', '–ö–ª–∞–Ω —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω!', 'success');
				  });
				  clanEmojiSelector.appendChild(emojiEl);
				});
			  }
			});
		  }

		  if (closeClanModal && clanModal) {
			closeClanModal.addEventListener('click', () => {
			  clanModal.classList.remove('active');
			});
		  }

		  if (saveClanBtn && clanModal) {
			saveClanBtn.addEventListener('click', () => {
			  clanModal.classList.remove('active');
			});
		  }

		  // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø–æ –∫–ª–∏–∫—É –Ω–∞ –æ–≤–µ—Ä–ª–µ–π
		  document.querySelectorAll('.modal').forEach(modal => {
			modal.addEventListener('click', (e) => {
			  if (e.target === modal) {
				modal.classList.remove('active');
			  }
			});
		  });

		  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
		  console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...');
		  initializeSupabase();
		});

		// –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –æ–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å–∞
		let lastActivity = Date.now();
		document.addEventListener('mousemove', () => {
		  lastActivity = Date.now();
		  if (currentUser) {
			onlineUsers.add(currentUser.id);
			updateOnlineStatus();
		  }
		});

		setInterval(() => {
		  if (currentUser && (Date.now() - lastActivity) < 5 * 60 * 1000) {
			onlineUsers.add(currentUser.id);
		  } else {
			onlineUsers.delete(currentUser?.id);
		  }
		  updateOnlineStatus();
		}, 30000);
	</script>
</body>
</html>